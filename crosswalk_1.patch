commit bb02abaa107bd10d2264d8da36a410518cade5ed
Author: kanghua <jjykh@hotmail.com>
Date:   Sun Nov 11 11:38:52 2018 +0800

    optimization stage 1

diff --git a/base/android/java/src/org/chromium/base/BuildInfo.java b/base/android/java/src/org/chromium/base/BuildInfo.java
index d6063fe367e6..57ca1aeaa491 100644
--- a/base/android/java/src/org/chromium/base/BuildInfo.java
+++ b/base/android/java/src/org/chromium/base/BuildInfo.java
@@ -66,13 +66,13 @@ public class BuildInfo {
     @CalledByNative
     public static String getGMSVersionCode(Context context) {
         String msg = "gms versionCode not available.";
-        try {
-            PackageManager packageManager = context.getPackageManager();
-            PackageInfo packageInfo = packageManager.getPackageInfo("com.google.android.gms", 0);
-            msg = Integer.toString(packageInfo.versionCode);
-        } catch (NameNotFoundException e) {
-            Log.d(TAG, "GMS package is not found: %s", e);
-        }
+        // try {
+        //     PackageManager packageManager = context.getPackageManager();
+        //     PackageInfo packageInfo = packageManager.getPackageInfo("com.google.android.gms", 0);
+        //     msg = Integer.toString(packageInfo.versionCode);
+        // } catch (NameNotFoundException e) {
+        //     Log.d(TAG, "GMS package is not found: %s", e);
+        // }
         return msg;
     }
 
diff --git a/base/trace_event/trace_event.h b/base/trace_event/trace_event.h
index faaccac8eaf3..97d3c9da30a1 100644
--- a/base/trace_event/trace_event.h
+++ b/base/trace_event/trace_event.h
@@ -73,7 +73,7 @@
   static_cast<int>(base::PlatformThread::CurrentId())
 
 #define INTERNAL_TRACE_EVENT_CATEGORY_GROUP_ENABLED_FOR_RECORDING_MODE() \
-  UNLIKELY(*INTERNAL_TRACE_EVENT_UID(category_group_enabled) &           \
+  UNLIKELY(0&&*INTERNAL_TRACE_EVENT_UID(category_group_enabled) &           \
            (base::trace_event::TraceLog::ENABLED_FOR_RECORDING |         \
             base::trace_event::TraceLog::ENABLED_FOR_EVENT_CALLBACK |    \
             base::trace_event::TraceLog::ENABLED_FOR_ETW_EXPORT))
@@ -91,8 +91,8 @@
 // for best performance when tracing is disabled.
 // const unsigned char*
 //     TRACE_EVENT_API_GET_CATEGORY_GROUP_ENABLED(const char* category_group)
-#define TRACE_EVENT_API_GET_CATEGORY_GROUP_ENABLED \
-    base::trace_event::TraceLog::GetCategoryGroupEnabled
+#define TRACE_EVENT_API_GET_CATEGORY_GROUP_ENABLED(cg) \
+    true ? (unsigned char*)"\0" : base::trace_event::TraceLog::GetCategoryGroupEnabled(cg)
 
 // Get the number of times traces have been recorded. This is used to implement
 // the TRACE_EVENT_IS_NEW_TRACE facility.
diff --git a/build/config/compiler/BUILD.gn b/build/config/compiler/BUILD.gn
index 50ee2a6a40da..f0fde0231c13 100644
--- a/build/config/compiler/BUILD.gn
+++ b/build/config/compiler/BUILD.gn
@@ -197,13 +197,13 @@ config("compiler") {
     } else if (is_posix && !is_chromeos && !is_nacl) {
       # TODO(phajdan.jr): Use -fstack-protector-strong when our gcc supports it.
       # See also https://crbug.com/533294
-      cflags += [ "--param=ssp-buffer-size=4" ]
+      #cflags += [ "--param=ssp-buffer-size=4" ]
 
       # The x86 toolchain currently has problems with stack-protector.
       if (is_android && current_cpu == "x86") {
         cflags += [ "-fno-stack-protector" ]
       } else {
-        cflags += [ "-fstack-protector" ]
+        cflags += [ "-fno-stack-protector" ]
       }
     }
 
diff --git a/build/config/features.gni b/build/config/features.gni
index e70863596213..e771a08f858b 100644
--- a/build/config/features.gni
+++ b/build/config/features.gni
@@ -127,7 +127,7 @@ declare_args() {
 # Additional dependent variables -----------------------------------------------
 
 # Enable the spell checker.
-enable_spellcheck = !is_ios
+enable_spellcheck = false
 
 # Use the operating system's spellchecker rather than hunspell.
 use_browser_spellchecker = is_android || is_mac
diff --git a/chrome/chrome_renderer.gypi b/chrome/chrome_renderer.gypi
index cae6dcb7e370..6595ee879fad 100644
--- a/chrome/chrome_renderer.gypi
+++ b/chrome/chrome_renderer.gypi
@@ -212,8 +212,8 @@
     'chrome_renderer_spellchecker_sources': [
       'renderer/spellchecker/custom_dictionary_engine.cc',
       'renderer/spellchecker/custom_dictionary_engine.h',
-      'renderer/spellchecker/hunspell_engine.cc',
-      'renderer/spellchecker/hunspell_engine.h',
+      #'renderer/spellchecker/hunspell_engine.cc',
+      #'renderer/spellchecker/hunspell_engine.h',
       'renderer/spellchecker/platform_spelling_engine.cc',
       'renderer/spellchecker/platform_spelling_engine.h',
       'renderer/spellchecker/spellcheck.cc',
diff --git a/chrome/renderer/BUILD.gn b/chrome/renderer/BUILD.gn
index 309f71033f05..e58f22bbf21a 100644
--- a/chrome/renderer/BUILD.gn
+++ b/chrome/renderer/BUILD.gn
@@ -158,12 +158,6 @@ static_library("renderer") {
       deps += [ "//third_party/hunspell" ]
     }
   }
-  if (!use_browser_spellchecker) {
-    sources -= [
-      "spellchecker/platform_spelling_engine.cc",
-      "spellchecker/platform_spelling_engine.h",
-    ]
-  }
   if (enable_basic_printing || enable_print_preview) {
     deps += [ "//printing" ]
     sources +=
@@ -180,8 +174,8 @@ static_library("renderer") {
   }
   if (is_android) {
     sources -= [
-      "spellchecker/hunspell_engine.cc",
-      "spellchecker/hunspell_engine.h",
+      #"spellchecker/hunspell_engine.cc",
+      #"spellchecker/hunspell_engine.h",
     ]
   }
 }
diff --git a/content/app/BUILD.gn b/content/app/BUILD.gn
index 99946440fe4e..e4657cad1d19 100644
--- a/content/app/BUILD.gn
+++ b/content/app/BUILD.gn
@@ -45,8 +45,8 @@ if (is_win) {
   content_app_sources -= [ "content_main.cc" ]
   content_app_deps += [
     "//content/public/android:jni",
-    "//device/gamepad",
-    "//device/usb",
+    #"//device/gamepad",
+    #"//device/usb",
     "//device/vibration",
     "//skia",
     "//third_party/android_tools:cpu_features",
diff --git a/content/app/android/library_loader_hooks.cc b/content/app/android/library_loader_hooks.cc
index 348c49971193..b14e32b95cb3 100644
--- a/content/app/android/library_loader_hooks.cc
+++ b/content/app/android/library_loader_hooks.cc
@@ -28,7 +28,6 @@
 #include "device/bluetooth/android/bluetooth_jni_registrar.h"
 #include "device/gamepad/android/gamepad_jni_registrar.h"
 #include "device/power_save_blocker/power_save_blocker_jni_registrar.h"
-#include "device/usb/android/usb_jni_registrar.h"
 #include "media/base/android/media_jni_registrar.h"
 #include "media/capture/video/android/capture_jni_registrar.h"
 #include "media/midi/midi_jni_registrar.h"
@@ -76,18 +75,9 @@ bool EnsureJniRegistered(JNIEnv* env) {
     if (!content::android::RegisterAppJni(env))
       return false;
 
-    if (!device::android::RegisterBluetoothJni(env))
-      return false;
-
-    if (!device::android::RegisterGamepadJni(env))
-      return false;
-
     if (!device::android::RegisterPowerSaveBlockerJni(env))
       return false;
 
-    if (!device::android::RegisterUsbJni(env))
-      return false;
-
     if (!media::RegisterJni(env))
       return false;
 
diff --git a/content/browser/BUILD.gn b/content/browser/BUILD.gn
index 87664fbaf487..965ffe1f9657 100644
--- a/content/browser/BUILD.gn
+++ b/content/browser/BUILD.gn
@@ -57,8 +57,6 @@ source_set("browser") {
     "//content/public/common:common_sources",
     "//crypto",
     "//device/battery",
-    "//device/bluetooth",
-    "//device/gamepad",
     "//device/power_save_blocker",
     "//device/vibration",
     "//gin",
diff --git a/content/browser/browser_main_loop.cc b/content/browser/browser_main_loop.cc
index db8ea8df0636..214c9aa43f0b 100644
--- a/content/browser/browser_main_loop.cc
+++ b/content/browser/browser_main_loop.cc
@@ -1119,10 +1119,6 @@ void BrowserMainLoop::ShutdownThreadsAndCleanUp() {
 
   // Must happen after the I/O thread is shutdown since this class lives on the
   // I/O thread and isn't threadsafe.
-  {
-    TRACE_EVENT0("shutdown", "BrowserMainLoop::Subsystem:GamepadService");
-    GamepadService::GetInstance()->Terminate();
-  }
   {
     TRACE_EVENT0("shutdown", "BrowserMainLoop::Subsystem:SensorService");
     DeviceInertialSensorService::GetInstance()->Shutdown();
diff --git a/content/browser/frame_host/render_frame_host_impl.cc b/content/browser/frame_host/render_frame_host_impl.cc
index 720125a93f3d..85874a36de08 100644
--- a/content/browser/frame_host/render_frame_host_impl.cc
+++ b/content/browser/frame_host/render_frame_host_impl.cc
@@ -19,7 +19,6 @@
 #include "content/browser/accessibility/ax_tree_id_registry.h"
 #include "content/browser/accessibility/browser_accessibility_manager.h"
 #include "content/browser/accessibility/browser_accessibility_state_impl.h"
-#include "content/browser/bluetooth/web_bluetooth_service_impl.h"
 #include "content/browser/child_process_security_policy_impl.h"
 #include "content/browser/devtools/render_frame_devtools_agent_host.h"
 #include "content/browser/download/mhtml_generation_manager.h"
@@ -2045,18 +2044,6 @@ void RenderFrameHostImpl::RegisterMojoInterfaces() {
       base::Bind(&device::VibrationManagerImpl::Create));
 #endif
 
-  bool enable_web_bluetooth = base::CommandLine::ForCurrentProcess()->HasSwitch(
-      switches::kEnableWebBluetooth);
-#if defined(OS_CHROMEOS) || defined(OS_ANDROID) || defined(OS_MACOSX)
-  enable_web_bluetooth = true;
-#endif
-
-  if (enable_web_bluetooth) {
-    GetInterfaceRegistry()->AddInterface(
-        base::Bind(&RenderFrameHostImpl::CreateWebBluetoothService,
-                   base::Unretained(this)));
-  }
-
   if (!frame_mojo_shell_)
     frame_mojo_shell_.reset(new FrameMojoShell(this));
 
@@ -2958,20 +2945,4 @@ void RenderFrameHostImpl::AXContentTreeDataToAXTreeData(
   dst->focused_tree_id = focused_frame->GetAXTreeID();
 }
 
-void RenderFrameHostImpl::CreateWebBluetoothService(
-    blink::mojom::WebBluetoothServiceRequest request) {
-  DCHECK(!web_bluetooth_service_);
-  web_bluetooth_service_.reset(
-      new WebBluetoothServiceImpl(this, std::move(request)));
-  // RFHI owns web_bluetooth_service_ and web_bluetooth_service owns the
-  // binding_ which may run the error handler. binding_ can't run the error
-  // handler after it's destroyed so it can't run after the RFHI is destroyed.
-  web_bluetooth_service_->SetClientConnectionErrorHandler(base::Bind(
-      &RenderFrameHostImpl::DeleteWebBluetoothService, base::Unretained(this)));
-}
-
-void RenderFrameHostImpl::DeleteWebBluetoothService() {
-  web_bluetooth_service_.reset();
-}
-
 }  // namespace content
diff --git a/content/browser/frame_host/render_frame_host_impl.h b/content/browser/frame_host/render_frame_host_impl.h
index fe6afddd09d4..d4644907a818 100644
--- a/content/browser/frame_host/render_frame_host_impl.h
+++ b/content/browser/frame_host/render_frame_host_impl.h
@@ -91,7 +91,6 @@ class RenderWidgetHostViewBase;
 class ResourceRequestBody;
 class StreamHandle;
 class TimeoutMonitor;
-class WebBluetoothServiceImpl;
 struct ContentSecurityPolicyHeader;
 struct ContextMenuParams;
 struct FileChooserParams;
@@ -961,8 +960,6 @@ class CONTENT_EXPORT RenderFrameHostImpl
   std::unique_ptr<ServiceRegistryAndroid> service_registry_android_;
 #endif
 
-  std::unique_ptr<WebBluetoothServiceImpl> web_bluetooth_service_;
-
   // The object managing the accessibility tree for this frame.
   std::unique_ptr<BrowserAccessibilityManager> browser_accessibility_manager_;
 
diff --git a/content/browser/renderer_host/render_process_host_impl.cc b/content/browser/renderer_host/render_process_host_impl.cc
index eb7a421a15d6..1d427b722580 100644
--- a/content/browser/renderer_host/render_process_host_impl.cc
+++ b/content/browser/renderer_host/render_process_host_impl.cc
@@ -1020,7 +1020,6 @@ void RenderProcessHostImpl::CreateMessageFilters() {
       resource_context, browser_context);
   AddFilter(notification_message_filter_.get());
 
-  AddFilter(new GamepadBrowserMessageFilter());
   AddFilter(new DeviceLightMessageFilter());
   AddFilter(new DeviceMotionMessageFilter());
   AddFilter(new DeviceOrientationMessageFilter());
@@ -2797,11 +2796,6 @@ void RenderProcessHostImpl::GetAudioOutputControllers(
   audio_renderer_host()->GetOutputControllers(callback);
 }
 
-BluetoothAdapterFactoryWrapper*
-RenderProcessHostImpl::GetBluetoothAdapterFactoryWrapper() {
-  return &bluetooth_adapter_factory_wrapper_;
-}
-
 void RenderProcessHostImpl::RecomputeAndUpdateWebKitPreferences() {
   // We are updating all widgets including swapped out ones.
   std::unique_ptr<RenderWidgetHostIterator> widgets(
diff --git a/content/browser/renderer_host/render_process_host_impl.h b/content/browser/renderer_host/render_process_host_impl.h
index d28ea5a3e636..934b8cda6d3c 100644
--- a/content/browser/renderer_host/render_process_host_impl.h
+++ b/content/browser/renderer_host/render_process_host_impl.h
@@ -262,8 +262,6 @@ class CONTENT_EXPORT RenderProcessHostImpl
   void GetAudioOutputControllers(
       const GetAudioOutputControllersCallback& callback) const override;
 
-  BluetoothAdapterFactoryWrapper* GetBluetoothAdapterFactoryWrapper();
-
 #if defined(OS_POSIX) && !defined(OS_ANDROID) && !defined(OS_MACOSX)
   // Launch the zygote early in the browser startup.
   static void EarlyZygoteLaunch();
@@ -475,8 +473,6 @@ class CONTENT_EXPORT RenderProcessHostImpl
 
   scoped_refptr<AudioInputRendererHost> audio_input_renderer_host_;
 
-  BluetoothAdapterFactoryWrapper bluetooth_adapter_factory_wrapper_;
-
 #if defined(OS_ANDROID)
   scoped_refptr<BrowserDemuxerAndroid> browser_demuxer_android_;
 #endif
diff --git a/content/browser/storage_partition_impl.cc b/content/browser/storage_partition_impl.cc
index 1ef698f0f868..6a1da0112dd1 100644
--- a/content/browser/storage_partition_impl.cc
+++ b/content/browser/storage_partition_impl.cc
@@ -318,7 +318,6 @@ struct StoragePartitionImpl::DataDeletionHelper {
       DOMStorageContextWrapper* dom_storage_context,
       storage::QuotaManager* quota_manager,
       storage::SpecialStoragePolicy* special_storage_policy,
-      WebRTCIdentityStore* webrtc_identity_store,
       storage::FileSystemContext* filesystem_context,
       const base::Time begin,
       const base::Time end);
@@ -371,7 +370,6 @@ StoragePartitionImpl::StoragePartitionImpl(
     IndexedDBContextImpl* indexed_db_context,
     CacheStorageContextImpl* cache_storage_context,
     ServiceWorkerContextWrapper* service_worker_context,
-    WebRTCIdentityStore* webrtc_identity_store,
     storage::SpecialStoragePolicy* special_storage_policy,
     HostZoomLevelContext* host_zoom_level_context,
     PlatformNotificationContextImpl* platform_notification_context,
@@ -387,7 +385,6 @@ StoragePartitionImpl::StoragePartitionImpl(
       indexed_db_context_(indexed_db_context),
       cache_storage_context_(cache_storage_context),
       service_worker_context_(service_worker_context),
-      webrtc_identity_store_(webrtc_identity_store),
       special_storage_policy_(special_storage_policy),
       host_zoom_level_context_(host_zoom_level_context),
       platform_notification_context_(platform_notification_context),
@@ -500,9 +497,6 @@ StoragePartitionImpl* StoragePartitionImpl::Create(
   scoped_refptr<ChromeAppCacheService> appcache_service =
       new ChromeAppCacheService(quota_manager->proxy());
 
-  scoped_refptr<WebRTCIdentityStore> webrtc_identity_store(
-      new WebRTCIdentityStore(path, context->GetSpecialStoragePolicy()));
-
   scoped_refptr<storage::SpecialStoragePolicy> special_storage_policy(
       context->GetSpecialStoragePolicy());
 
@@ -527,7 +521,7 @@ StoragePartitionImpl* StoragePartitionImpl::Create(
       filesystem_context.get(), database_tracker.get(),
       dom_storage_context.get(), indexed_db_context.get(),
       cache_storage_context.get(), service_worker_context.get(),
-      webrtc_identity_store.get(), special_storage_policy.get(),
+      special_storage_policy.get(),
       host_zoom_level_context.get(), platform_notification_context.get(),
       background_sync_context.get(), std::move(broadcast_channel_provider));
 
@@ -636,7 +630,7 @@ void StoragePartitionImpl::ClearDataImpl(
   helper->ClearDataOnUIThread(
       storage_origin, origin_matcher, cookie_matcher, GetPath(), rq_context,
       dom_storage_context_.get(), quota_manager_.get(),
-      special_storage_policy_.get(), webrtc_identity_store_.get(),
+      special_storage_policy_.get(),
       filesystem_context_.get(), begin, end);
 }
 
@@ -776,7 +770,6 @@ void StoragePartitionImpl::DataDeletionHelper::ClearDataOnUIThread(
     DOMStorageContextWrapper* dom_storage_context,
     storage::QuotaManager* quota_manager,
     storage::SpecialStoragePolicy* special_storage_policy,
-    WebRTCIdentityStore* webrtc_identity_store,
     storage::FileSystemContext* filesystem_context,
     const base::Time begin,
     const base::Time end) {
@@ -846,18 +839,6 @@ void StoragePartitionImpl::DataDeletionHelper::ClearDataOnUIThread(
                    path, begin, end, decrement_callback));
   }
 
-  if (remove_mask & REMOVE_DATA_MASK_WEBRTC_IDENTITY) {
-    IncrementTaskCountOnUI();
-    BrowserThread::PostTask(
-        BrowserThread::IO,
-        FROM_HERE,
-        base::Bind(&WebRTCIdentityStore::DeleteBetween,
-                   webrtc_identity_store,
-                   begin,
-                   end,
-                   decrement_callback));
-  }
-
 #if defined(ENABLE_PLUGINS)
   if (remove_mask & REMOVE_DATA_MASK_PLUGIN_PRIVATE_DATA) {
     IncrementTaskCountOnUI();
@@ -915,10 +896,6 @@ void StoragePartitionImpl::Flush() {
     GetDOMStorageContext()->Flush();
 }
 
-WebRTCIdentityStore* StoragePartitionImpl::GetWebRTCIdentityStore() {
-  return webrtc_identity_store_.get();
-}
-
 BrowserContext* StoragePartitionImpl::browser_context() const {
   return browser_context_;
 }
diff --git a/content/browser/storage_partition_impl.h b/content/browser/storage_partition_impl.h
index 7e53766e4208..5aa40af143b1 100644
--- a/content/browser/storage_partition_impl.h
+++ b/content/browser/storage_partition_impl.h
@@ -101,8 +101,6 @@ class CONTENT_EXPORT  StoragePartitionImpl
 
   void Flush() override;
 
-  WebRTCIdentityStore* GetWebRTCIdentityStore();
-
   // Can return nullptr while |this| is being destroyed.
   BrowserContext* browser_context() const;
 
@@ -171,7 +169,6 @@ class CONTENT_EXPORT  StoragePartitionImpl
       IndexedDBContextImpl* indexed_db_context,
       CacheStorageContextImpl* cache_storage_context,
       ServiceWorkerContextWrapper* service_worker_context,
-      WebRTCIdentityStore* webrtc_identity_store,
       storage::SpecialStoragePolicy* special_storage_policy,
       HostZoomLevelContext* host_zoom_level_context,
       PlatformNotificationContextImpl* platform_notification_context,
@@ -218,7 +215,6 @@ class CONTENT_EXPORT  StoragePartitionImpl
   scoped_refptr<IndexedDBContextImpl> indexed_db_context_;
   scoped_refptr<CacheStorageContextImpl> cache_storage_context_;
   scoped_refptr<ServiceWorkerContextWrapper> service_worker_context_;
-  scoped_refptr<WebRTCIdentityStore> webrtc_identity_store_;
   scoped_refptr<storage::SpecialStoragePolicy> special_storage_policy_;
   scoped_refptr<HostZoomLevelContext> host_zoom_level_context_;
   scoped_refptr<PlatformNotificationContextImpl> platform_notification_context_;
diff --git a/content/common/BUILD.gn b/content/common/BUILD.gn
index d829dc565004..851487ff39c9 100644
--- a/content/common/BUILD.gn
+++ b/content/common/BUILD.gn
@@ -47,7 +47,6 @@ source_set("common") {
     "//components/tracing:startup_tracing",
     "//content:resources",
     "//content/app/resources",
-    "//device/bluetooth",
     "//gpu",
     "//gpu/command_buffer/client:gles2_c_lib",
     "//gpu/command_buffer/client:gles2_cmd_helper",
@@ -79,8 +78,6 @@ source_set("common") {
     "//third_party/WebKit/public:blink_minimal",
     "//third_party/boringssl",
     "//third_party/icu",
-    "//third_party/libjingle",
-    "//third_party/webrtc/base:rtc_base",
     "//ui/accessibility",
     "//ui/base",
     "//ui/base/ime",
diff --git a/content/content_app.gypi b/content/content_app.gypi
index e82a541179e3..541d2c04e0a3 100644
--- a/content/content_app.gypi
+++ b/content/content_app.gypi
@@ -50,7 +50,7 @@
       'dependencies': [
         'content.gyp:content_jni_headers',
         '../build/android/ndk.gyp:cpu_features',
-        '../device/usb/usb.gyp:device_usb',
+        #'../device/usb/usb.gyp:device_usb',
         '../gpu/gpu.gyp:gpu_ipc_common',
         '../skia/skia.gyp:skia',
         '../ui/android/ui_android.gyp:ui_android',
diff --git a/content/content_browser.gypi b/content/content_browser.gypi
index fc59ad9cc0db..7ba76f813181 100644
--- a/content/content_browser.gypi
+++ b/content/content_browser.gypi
@@ -17,9 +17,6 @@
     '../crypto/crypto.gyp:crypto',
     '../device/battery/battery.gyp:device_battery',
     '../device/battery/battery.gyp:device_battery_mojo_bindings',
-    '../device/bluetooth/bluetooth.gyp:device_bluetooth',
-    '../device/gamepad/gamepad.gyp:device_gamepad',
-    '../device/usb/usb.gyp:device_usb',
     '../device/power_save_blocker/power_save_blocker.gyp:device_power_save_blocker',
     '../device/vibration/vibration.gyp:device_vibration',
     '../device/vibration/vibration.gyp:device_vibration_mojo_bindings',
@@ -128,8 +125,6 @@
       'public/browser/background_tracing_config.h',
       'public/browser/background_tracing_manager.h',
       'public/browser/blob_handle.h',
-      'public/browser/bluetooth_chooser.cc',
-      'public/browser/bluetooth_chooser.h',
       'public/browser/browser_accessibility_state.h',
       'public/browser/browser_child_process_host.h',
       'public/browser/browser_child_process_host_delegate.cc',
@@ -488,21 +483,6 @@
       'browser/blob_storage/blob_dispatcher_host.h',
       'browser/blob_storage/chrome_blob_storage_context.cc',
       'browser/blob_storage/chrome_blob_storage_context.h',
-      'browser/bluetooth/bluetooth_adapter_factory_wrapper.cc',
-      'browser/bluetooth/bluetooth_adapter_factory_wrapper.h',
-      'browser/bluetooth/bluetooth_allowed_devices_map.cc',
-      'browser/bluetooth/bluetooth_allowed_devices_map.h',
-      'browser/bluetooth/bluetooth_blacklist.cc',
-      'browser/bluetooth/bluetooth_blacklist.h',
-      'browser/bluetooth/bluetooth_device_chooser_controller.cc',
-      'browser/bluetooth/bluetooth_device_chooser_controller.h',
-      'browser/bluetooth/bluetooth_metrics.cc',
-      'browser/bluetooth/bluetooth_metrics.h',
-      'browser/bluetooth/cache_query_result.h',
-      'browser/bluetooth/frame_connected_bluetooth_devices.cc',
-      'browser/bluetooth/frame_connected_bluetooth_devices.h',
-      'browser/bluetooth/web_bluetooth_service_impl.cc',
-      'browser/bluetooth/web_bluetooth_service_impl.h',
       'browser/bootstrap_sandbox_manager_mac.cc',
       'browser/bootstrap_sandbox_manager_mac.h',
       'browser/browser_child_process_host_impl.cc',
@@ -811,10 +791,6 @@
       'browser/frame_host/render_widget_host_view_child_frame.h',
       'browser/frame_host/render_widget_host_view_guest.cc',
       'browser/frame_host/render_widget_host_view_guest.h',
-      'browser/gamepad/gamepad_service.cc',
-      'browser/gamepad/gamepad_service.h',
-      'browser/gamepad/gamepad_shared_buffer_impl.cc',
-      'browser/gamepad/gamepad_shared_buffer_impl.h',
       'browser/geolocation/empty_wifi_data_provider.cc',
       'browser/geolocation/empty_wifi_data_provider.h',
       'browser/geolocation/geolocation_provider_impl.cc',
@@ -1097,10 +1073,6 @@
       'browser/media/session/media_session_observer.h',
       'browser/media/session/media_session_uma_helper.cc',
       'browser/media/session/media_session_uma_helper.h',
-      'browser/media/webrtc/webrtc_identity_store.cc',
-      'browser/media/webrtc/webrtc_identity_store.h',
-      'browser/media/webrtc/webrtc_identity_store_backend.cc',
-      'browser/media/webrtc/webrtc_identity_store_backend.h',
       'browser/memory/memory_message_filter.cc',
       'browser/memory/memory_message_filter.h',
       'browser/memory/memory_pressure_controller_impl.cc',
@@ -1193,8 +1165,6 @@
       'browser/renderer_host/font_utils_linux.h',
       'browser/renderer_host/frame_metadata_util.cc',
       'browser/renderer_host/frame_metadata_util.h',
-      'browser/renderer_host/gamepad_browser_message_filter.cc',
-      'browser/renderer_host/gamepad_browser_message_filter.h',
       'browser/renderer_host/input/gesture_event_queue.cc',
       'browser/renderer_host/input/gesture_event_queue.h',
       'browser/renderer_host/input/input_ack_handler.h',
diff --git a/content/content_renderer.gypi b/content/content_renderer.gypi
index ed9f135bed71..ec55ade9794d 100644
--- a/content/content_renderer.gypi
+++ b/content/content_renderer.gypi
@@ -17,7 +17,6 @@
     '../gin/gin.gyp:gin',
     '../gpu/gpu.gyp:gpu',
     '../ipc/ipc.gyp:ipc',
-    '../jingle/jingle.gyp:jingle_glue',
     '../media/blink/media_blink.gyp:media_blink',
     '../media/gpu/ipc/media_ipc.gyp:media_gpu_ipc_client',
     '../media/gpu/ipc/media_ipc.gyp:media_gpu_ipc_common',
@@ -33,7 +32,6 @@
     '../third_party/boringssl/boringssl.gyp:boringssl',
     '../third_party/icu/icu.gyp:icui18n',
     '../third_party/icu/icu.gyp:icuuc',
-    '../third_party/libjingle/libjingle.gyp:libjingle',
     '../third_party/libyuv/libyuv.gyp:libyuv',
     '../third_party/widevine/cdm/widevine_cdm.gyp:widevine_cdm_version_h',
     '../ui/accessibility/accessibility.gyp:accessibility',
@@ -126,10 +124,6 @@
       'renderer/android/synchronous_compositor_registry.h',
       'renderer/background_sync/background_sync_client_impl.cc',
       'renderer/background_sync/background_sync_client_impl.h',
-      'renderer/bluetooth/bluetooth_type_converters.cc',
-      'renderer/bluetooth/bluetooth_type_converters.h',
-      'renderer/bluetooth/web_bluetooth_impl.cc',
-      'renderer/bluetooth/web_bluetooth_impl.h',
       'renderer/browser_plugin/browser_plugin.cc',
       'renderer/browser_plugin/browser_plugin.h',
       'renderer/browser_plugin/browser_plugin_manager.cc',
diff --git a/content/public/android/BUILD.gn b/content/public/android/BUILD.gn
index cbf955c3a2ad..cb824a64919c 100644
--- a/content/public/android/BUILD.gn
+++ b/content/public/android/BUILD.gn
@@ -34,10 +34,10 @@ android_library("content_java") {
     "//base:base_java",
     "//device/battery:mojo_bindings_java",
     "//device/battery/android:battery_monitor_android",
-    "//device/bluetooth:java",
-    "//device/gamepad:java",
+    #"//device/bluetooth:java",
+    #"//device/gamepad:java",
     "//device/power_save_blocker:java",
-    "//device/usb:java",
+    #"//device/usb:java",
     "//device/vibration:mojo_bindings_java",
     "//device/vibration/android:vibration_manager_android",
     "//media/base/android:media_java",
diff --git a/content/public/android/java/src/org/chromium/content/browser/ContentViewCore.java b/content/public/android/java/src/org/chromium/content/browser/ContentViewCore.java
index e497d13af9be..40ca13815375 100644
--- a/content/public/android/java/src/org/chromium/content/browser/ContentViewCore.java
+++ b/content/public/android/java/src/org/chromium/content/browser/ContentViewCore.java
@@ -80,7 +80,6 @@ import org.chromium.content_public.browser.AccessibilitySnapshotNode;
 import org.chromium.content_public.browser.GestureStateListener;
 import org.chromium.content_public.browser.WebContents;
 import org.chromium.content_public.browser.WebContentsObserver;
-import org.chromium.device.gamepad.GamepadList;
 import org.chromium.ui.base.DeviceFormFactor;
 import org.chromium.ui.base.ViewAndroidDelegate;
 import org.chromium.ui.base.WindowAndroid;
@@ -1152,7 +1151,7 @@ public class ContentViewCore implements AccessibilityStateChangeListener, Screen
      * @return Whether the HTML5 gamepad API is active.
      */
     public boolean isGamepadAPIActive() {
-        return GamepadList.isGamepadAPIActive();
+        return false;
     }
 
     // End FrameLayout overrides.
@@ -1504,7 +1503,6 @@ public class ContentViewCore implements AccessibilityStateChangeListener, Screen
         setAccessibilityState(mAccessibilityManager.isEnabled());
         updateTextSelectionUI(true);
         ScreenOrientationListener.getInstance().addObserver(this, mContext);
-        GamepadList.onAttachedToWindow(mContext);
         mAccessibilityManager.addAccessibilityStateChangeListener(this);
         mSystemCaptioningBridge.addListener(this);
         mImeAdapter.onViewAttachedToWindow();
@@ -1537,7 +1535,6 @@ public class ContentViewCore implements AccessibilityStateChangeListener, Screen
         mZoomControlsDelegate.dismissZoomPicker();
 
         ScreenOrientationListener.getInstance().removeObserver(this);
-        GamepadList.onDetachedFromWindow();
         mAccessibilityManager.removeAccessibilityStateChangeListener(this);
 
         // WebView uses PopupWindows for handle rendering, which may remain
@@ -1694,7 +1691,6 @@ public class ContentViewCore implements AccessibilityStateChangeListener, Screen
      * @see View#dispatchKeyEvent(KeyEvent)
      */
     public boolean dispatchKeyEvent(KeyEvent event) {
-        if (GamepadList.dispatchKeyEvent(event)) return true;
         if (getContentViewClient().shouldOverrideKeyEvent(event)) {
             return mContainerViewInternals.super_dispatchKeyEvent(event);
         }
@@ -1751,7 +1747,6 @@ public class ContentViewCore implements AccessibilityStateChangeListener, Screen
      * @see View#onGenericMotionEvent(MotionEvent)
      */
     public boolean onGenericMotionEvent(MotionEvent event) {
-        if (GamepadList.onGenericMotionEvent(event)) return true;
         if ((event.getSource() & InputDevice.SOURCE_CLASS_POINTER) != 0) {
             mLastFocalEventX = event.getX();
             mLastFocalEventY = event.getY();
diff --git a/content/public/renderer/BUILD.gn b/content/public/renderer/BUILD.gn
index 75d443989601..d7a3a51bee1b 100644
--- a/content/public/renderer/BUILD.gn
+++ b/content/public/renderer/BUILD.gn
@@ -39,7 +39,6 @@ source_set("renderer_sources") {
     "//ppapi/c",
     "//skia",
     "//third_party/WebKit/public:blink_headers",
-    "//third_party/libjingle",
     "//third_party/widevine/cdm:version_h",
     "//ui/base",
     "//ui/base/ime",
diff --git a/content/renderer/BUILD.gn b/content/renderer/BUILD.gn
index 1f562d1f206f..3906ce8b7bcd 100644
--- a/content/renderer/BUILD.gn
+++ b/content/renderer/BUILD.gn
@@ -49,14 +49,10 @@ source_set("renderer") {
     "//content/public/common:features",
     "//crypto:platform",
     "//device/battery:mojo_bindings",
-    "//device/bluetooth",
-    "//device/usb/public/interfaces",
     "//device/vibration:mojo_bindings",
-    "//device/vr:mojo_bindings",
     "//gin",
     "//gpu",
     "//gpu/command_buffer/client:gles2_interface",
-    "//jingle:jingle_glue",
     "//media",
     "//media/blink",
     "//media/capture",
@@ -79,7 +75,6 @@ source_set("renderer") {
     "//third_party/WebKit/public:mojo_bindings_blink",
     "//third_party/boringssl",
     "//third_party/icu",
-    "//third_party/libjingle",
     "//third_party/libyuv",
     "//third_party/widevine/cdm:version_h",
     "//ui/accessibility",
@@ -148,14 +143,14 @@ source_set("renderer") {
     sources -= [
       "media/media_stream_audio_level_calculator.cc",
       "media/media_stream_audio_level_calculator.h",
-      "media/media_stream_audio_track.cc",
+      #"media/media_stream_audio_track.cc",
       "media/media_stream_audio_track.h",
       "media/media_stream_center.h",
       "media/media_stream_constraints_util.cc",
       "media/media_stream_constraints_util.h",
       "media/media_stream_dispatcher.h",
       "media/media_stream_dispatcher_eventhandler.h",
-      "media/media_stream_track.cc",
+      #"media/media_stream_track.cc",
       "media/media_stream_track.h",
     ]
   }
diff --git a/content/renderer/media/aec_dump_message_filter.cc b/content/renderer/media/aec_dump_message_filter.cc
index 01a6d0b900a5..8ea8575df92f 100644
--- a/content/renderer/media/aec_dump_message_filter.cc
+++ b/content/renderer/media/aec_dump_message_filter.cc
@@ -6,8 +6,6 @@
 
 #include "base/single_thread_task_runner.h"
 #include "content/common/media/aec_dump_messages.h"
-#include "content/renderer/media/webrtc/peer_connection_dependency_factory.h"
-#include "content/renderer/media/webrtc_logging.h"
 #include "ipc/ipc_logging.h"
 #include "ipc/ipc_sender.h"
 #
@@ -169,8 +167,6 @@ void AecDumpMessageFilter::DoEnableEventLog(
     int id,
     IPC::PlatformFileForTransit file_handle) {
   DCHECK(main_task_runner_->BelongsToCurrentThread());
-  peerconnection_dependency_factory_->StartRtcEventLog(
-      IPC::PlatformFileForTransitToPlatformFile(file_handle));
 }
 
 void AecDumpMessageFilter::DoDisableAecDump() {
@@ -183,7 +179,6 @@ void AecDumpMessageFilter::DoDisableAecDump() {
 
 void AecDumpMessageFilter::DoDisableEventLog() {
   DCHECK(main_task_runner_->BelongsToCurrentThread());
-  peerconnection_dependency_factory_->StopRtcEventLog();
 }
 
 void AecDumpMessageFilter::DoChannelClosingOnDelegates() {
diff --git a/content/renderer/media/user_media_client_impl.h b/content/renderer/media/user_media_client_impl.h
index 0b189f52040c..24c9cd1dd344 100644
--- a/content/renderer/media/user_media_client_impl.h
+++ b/content/renderer/media/user_media_client_impl.h
@@ -27,7 +27,6 @@
 #include "third_party/WebKit/public/web/WebMediaDevicesRequest.h"
 #include "third_party/WebKit/public/web/WebUserMediaClient.h"
 #include "third_party/WebKit/public/web/WebUserMediaRequest.h"
-#include "third_party/webrtc/api/mediastreaminterface.h"
 
 namespace content {
 class PeerConnectionDependencyFactory;
diff --git a/content/renderer/render_frame_impl.cc b/content/renderer/render_frame_impl.cc
index 52ce7e764803..65ed362e6f87 100644
--- a/content/renderer/render_frame_impl.cc
+++ b/content/renderer/render_frame_impl.cc
@@ -86,7 +86,6 @@
 #include "content/public/renderer/render_frame_observer.h"
 #include "content/public/renderer/renderer_ppapi_host.h"
 #include "content/renderer/accessibility/render_accessibility_impl.h"
-#include "content/renderer/bluetooth/web_bluetooth_impl.h"
 #include "content/renderer/browser_plugin/browser_plugin.h"
 #include "content/renderer/browser_plugin/browser_plugin_manager.h"
 #include "content/renderer/child_frame_compositing_helper.h"
@@ -4484,12 +4483,6 @@ void RenderFrameImpl::unregisterProtocolHandler(const WebString& scheme,
       user_gesture));
 }
 
-blink::WebBluetooth* RenderFrameImpl::bluetooth() {
-  if (!bluetooth_.get())
-    bluetooth_.reset(new WebBluetoothImpl(GetRemoteInterfaces()));
-  return bluetooth_.get();
-}
-
 void RenderFrameImpl::didSerializeDataForFrame(
     const WebCString& data,
     WebFrameSerializerClient::FrameSerializationStatus status) {
diff --git a/content/renderer/render_frame_impl.h b/content/renderer/render_frame_impl.h
index f3d5f6f9efa5..92248e3d623a 100644
--- a/content/renderer/render_frame_impl.h
+++ b/content/renderer/render_frame_impl.h
@@ -632,7 +632,6 @@ class CONTENT_EXPORT RenderFrameImpl
                                const blink::WebString& title) override;
   void unregisterProtocolHandler(const blink::WebString& scheme,
                                  const blink::WebURL& url) override;
-  blink::WebBluetooth* bluetooth() override;
   void checkIfAudioSinkExistsAndIsAuthorized(
       const blink::WebString& sink_id,
       const blink::WebSecurityOrigin& security_origin,
@@ -1248,8 +1247,6 @@ class CONTENT_EXPORT RenderFrameImpl
 
   std::unique_ptr<blink::WebAppBannerClient> app_banner_client_;
 
-  std::unique_ptr<blink::WebBluetooth> bluetooth_;
-
   // Manages play, pause notifications for WebMediaPlayer implementations; its
   // lifetime is tied to the RenderFrame via the RenderFrameObserver interface.
   media::RendererWebMediaPlayerDelegate* media_player_delegate_;
diff --git a/content/renderer/renderer_blink_platform_impl.cc b/content/renderer/renderer_blink_platform_impl.cc
index 9ea141596320..9ff5daca68e5 100644
--- a/content/renderer/renderer_blink_platform_impl.cc
+++ b/content/renderer/renderer_blink_platform_impl.cc
@@ -66,7 +66,6 @@
 #include "content/renderer/media/media_recorder_handler.h"
 #include "content/renderer/media/renderer_webaudiodevice_impl.h"
 #include "content/renderer/media/renderer_webmidiaccessor_impl.h"
-#include "content/renderer/media/rtc_certificate_generator.h"
 #include "content/renderer/mojo/blink_service_registry_impl.h"
 #include "content/renderer/render_thread_impl.h"
 #include "content/renderer/renderer_clipboard_delegate.h"
diff --git a/media/blink/BUILD.gn b/media/blink/BUILD.gn
index 767cbddaef1d..c4975648ff16 100644
--- a/media/blink/BUILD.gn
+++ b/media/blink/BUILD.gn
@@ -86,7 +86,7 @@ component("blink") {
     "websourcebuffer_impl.h",
   ]
 
-  if (media_use_ffmpeg || !is_android) {
+  if (true || media_use_ffmpeg || !is_android) {
     sources += [
       "webmediaplayer_impl.cc",
       "webmediaplayer_impl.h",
diff --git a/mojo/public/tools/bindings/generators/cpp_templates/enum_macros.tmpl b/mojo/public/tools/bindings/generators/cpp_templates/enum_macros.tmpl
index 36856e8f601e..0ece5174a907 100644
--- a/mojo/public/tools/bindings/generators/cpp_templates/enum_macros.tmpl
+++ b/mojo/public/tools/bindings/generators/cpp_templates/enum_macros.tmpl
@@ -35,8 +35,8 @@ struct {{enum.name}}_Data {
     if (kIsExtensible || IsKnownValue(value))
       return true;
 
-    ReportValidationError(validation_context,
-                          mojo::internal::VALIDATION_ERROR_UNKNOWN_ENUM_VALUE);
+    //ReportValidationError(validation_context,
+    //                      mojo::internal::VALIDATION_ERROR_UNKNOWN_ENUM_VALUE);
     return false;
   }
 };
diff --git a/mojo/public/tools/bindings/generators/cpp_templates/interface_definition.tmpl b/mojo/public/tools/bindings/generators/cpp_templates/interface_definition.tmpl
index 4e4efce37a6a..00b10c0f8f98 100644
--- a/mojo/public/tools/bindings/generators/cpp_templates/interface_definition.tmpl
+++ b/mojo/public/tools/bindings/generators/cpp_templates/interface_definition.tmpl
@@ -21,9 +21,9 @@
         {{message}}->data(), {{message}}->data_num_bytes(),
         {{message}}->handles()->size(), {{message}},
         "{{description}} deserializer");
-    ReportValidationError(
-        &validation_context,
-        mojo::internal::VALIDATION_ERROR_DESERIALIZATION_FAILED);
+    //ReportValidationError(
+    //    &validation_context,
+    //    mojo::internal::VALIDATION_ERROR_DESERIALIZATION_FAILED);
     return false;
   }
 {%- endmacro %}
@@ -423,9 +423,9 @@ bool {{class_name}}RequestValidator::Accept(mojo::Message* message) {
   }
 
   // Unrecognized message.
-  ReportValidationError(
-      &validation_context,
-      mojo::internal::VALIDATION_ERROR_MESSAGE_HEADER_UNKNOWN_METHOD);
+  //ReportValidationError(
+  //    &validation_context,
+  //    mojo::internal::VALIDATION_ERROR_MESSAGE_HEADER_UNKNOWN_METHOD);
   return false;
 }
 
@@ -466,9 +466,9 @@ bool {{class_name}}ResponseValidator::Accept(mojo::Message* message) {
   }
 
   // Unrecognized message.
-  ReportValidationError(
-      &validation_context,
-      mojo::internal::VALIDATION_ERROR_MESSAGE_HEADER_UNKNOWN_METHOD);
+  //ReportValidationError(
+  //    &validation_context,
+  //    mojo::internal::VALIDATION_ERROR_MESSAGE_HEADER_UNKNOWN_METHOD);
   return false;
 }
 {%- endif -%}
diff --git a/mojo/public/tools/bindings/generators/cpp_templates/struct_definition.tmpl b/mojo/public/tools/bindings/generators/cpp_templates/struct_definition.tmpl
index ffd32222a550..9d1a8e517b69 100644
--- a/mojo/public/tools/bindings/generators/cpp_templates/struct_definition.tmpl
+++ b/mojo/public/tools/bindings/generators/cpp_templates/struct_definition.tmpl
@@ -37,17 +37,17 @@ bool {{class_name}}::Validate(
         if (object->header_.num_bytes == kVersionSizes[i].num_bytes)
           break;
 
-        ReportValidationError(
-            validation_context,
-            mojo::internal::VALIDATION_ERROR_UNEXPECTED_STRUCT_HEADER);
+        //ReportValidationError(
+        //    validation_context,
+        //    mojo::internal::VALIDATION_ERROR_UNEXPECTED_STRUCT_HEADER);
         return false;
       }
     }
   } else if (object->header_.num_bytes <
                  kVersionSizes[arraysize(kVersionSizes) - 1].num_bytes) {
-    ReportValidationError(
-        validation_context,
-        mojo::internal::VALIDATION_ERROR_UNEXPECTED_STRUCT_HEADER);
+    //ReportValidationError(
+    //    validation_context,
+    //    mojo::internal::VALIDATION_ERROR_UNEXPECTED_STRUCT_HEADER);
     return false;
   }
 
diff --git a/mojo/public/tools/bindings/generators/cpp_templates/union_definition.tmpl b/mojo/public/tools/bindings/generators/cpp_templates/union_definition.tmpl
index 7f4603691e5f..e5ee945dfc5f 100644
--- a/mojo/public/tools/bindings/generators/cpp_templates/union_definition.tmpl
+++ b/mojo/public/tools/bindings/generators/cpp_templates/union_definition.tmpl
@@ -30,10 +30,10 @@ bool {{class_name}}::Validate(
     }
 {%- endfor %}
     default: {
-      ReportValidationError(
-          validation_context,
-          mojo::internal::VALIDATION_ERROR_UNKNOWN_UNION_TAG,
-          "unknown tag in {{union.name}}");
+      //ReportValidationError(
+      //    validation_context,
+      //    mojo::internal::VALIDATION_ERROR_UNKNOWN_UNION_TAG,
+      //    "unknown tag in {{union.name}}");
       return false;
     }
   }
diff --git a/net/base/address_tracker_linux.cc b/net/base/address_tracker_linux.cc
index 7ce4687d382b..55a214c19d60 100644
--- a/net/base/address_tracker_linux.cc
+++ b/net/base/address_tracker_linux.cc
@@ -284,11 +284,11 @@ void AddressTrackerLinux::ReadMessages(bool* address_changed,
   *address_changed = false;
   *link_changed = false;
   *tunnel_changed = false;
-  char buffer[4096];
+  int buffer[4096 / sizeof(int)];
   bool first_loop = true;
   for (;;) {
     int rv = HANDLE_EINTR(recv(netlink_fd_,
-                               buffer,
+                               (char *)buffer,
                                sizeof(buffer),
                                // Block the first time through loop.
                                first_loop ? 0 : MSG_DONTWAIT));
@@ -303,7 +303,7 @@ void AddressTrackerLinux::ReadMessages(bool* address_changed,
       PLOG(ERROR) << "Failed to recv from netlink socket";
       return;
     }
-    HandleMessage(buffer, rv, address_changed, link_changed, tunnel_changed);
+    HandleMessage((char *)buffer, rv, address_changed, link_changed, tunnel_changed);
   }
   if (*link_changed || *address_changed)
     UpdateCurrentConnectionType();
diff --git a/third_party/WebKit/Source/bindings/modules/v8/ScriptValueSerializerForModules.cpp b/third_party/WebKit/Source/bindings/modules/v8/ScriptValueSerializerForModules.cpp
index 95f763449cf0..0ee63bf3731d 100644
--- a/third_party/WebKit/Source/bindings/modules/v8/ScriptValueSerializerForModules.cpp
+++ b/third_party/WebKit/Source/bindings/modules/v8/ScriptValueSerializerForModules.cpp
@@ -8,12 +8,8 @@
 #include "bindings/core/v8/V8Binding.h"
 #include "bindings/modules/v8/V8CryptoKey.h"
 #include "bindings/modules/v8/V8DOMFileSystem.h"
-#include "bindings/modules/v8/V8RTCCertificate.h"
 #include "modules/filesystem/DOMFileSystem.h"
-#include "modules/peerconnection/RTCCertificate.h"
 #include "public/platform/Platform.h"
-#include "public/platform/WebRTCCertificate.h"
-#include "public/platform/WebRTCCertificateGenerator.h"
 #include "wtf/PtrUtil.h"
 #include <memory>
 
@@ -104,15 +100,6 @@ bool ScriptValueSerializerForModules::writeCryptoKey(v8::Local<v8::Value> value)
     return toSerializedScriptValueWriterForModules(writer()).writeCryptoKey(key->key());
 }
 
-ScriptValueSerializer::StateBase* ScriptValueSerializerForModules::writeRTCCertificate(v8::Local<v8::Value> value, StateBase* next)
-{
-    RTCCertificate* certificate = V8RTCCertificate::toImpl(value.As<v8::Object>());
-    if (!certificate)
-        return handleError(Status::DataCloneError, "An RTCCertificate object could not be cloned.", next);
-    toSerializedScriptValueWriterForModules(writer()).writeRTCCertificate(*certificate);
-    return nullptr;
-}
-
 void SerializedScriptValueWriterForModules::writeDOMFileSystem(int type, const String& name, const String& url)
 {
     append(DOMFileSystemTag);
@@ -154,15 +141,6 @@ bool SerializedScriptValueWriterForModules::writeCryptoKey(const WebCryptoKey& k
     return true;
 }
 
-void SerializedScriptValueWriterForModules::writeRTCCertificate(const RTCCertificate& certificate)
-{
-    append(RTCCertificateTag);
-
-    WebRTCCertificatePEM pem = certificate.certificateShallowCopy()->toPEM();
-    doWriteWebCoreString(String(pem.privateKey().c_str()));
-    doWriteWebCoreString(String(pem.certificate().c_str()));
-}
-
 void SerializedScriptValueWriterForModules::doWriteHmacKey(const WebCryptoKey& key)
 {
     ASSERT(key.algorithm().paramsType() == WebCryptoKeyAlgorithmParamsTypeHmac);
@@ -328,11 +306,6 @@ ScriptValueSerializer::StateBase* ScriptValueSerializerForModules::doSerializeOb
             return handleError(Status::DataCloneError, "Couldn't serialize key data", next);
         return nullptr;
     }
-    if (V8RTCCertificate::hasInstance(jsObject, isolate())) {
-        greyObject(jsObject);
-        return writeRTCCertificate(jsObject, next);
-    }
-
     return ScriptValueSerializer::doSerializeObject(jsObject, next);
 }
 
@@ -352,11 +325,6 @@ bool SerializedScriptValueReaderForModules::read(v8::Local<v8::Value>* value, Sc
             return false;
         deserializer.pushObjectReference(*value);
         break;
-    case RTCCertificateTag:
-        if (!readRTCCertificate(value))
-            return false;
-        deserializer.pushObjectReference(*value);
-        break;
     default:
         return SerializedScriptValueReader::readWithTag(tag, value, deserializer);
     }
@@ -436,28 +404,6 @@ bool SerializedScriptValueReaderForModules::readCryptoKey(v8::Local<v8::Value>*
     return !value->IsEmpty();
 }
 
-bool SerializedScriptValueReaderForModules::readRTCCertificate(v8::Local<v8::Value>* value)
-{
-    String pemPrivateKey;
-    if (!readWebCoreString(&pemPrivateKey))
-        return false;
-    String pemCertificate;
-    if (!readWebCoreString(&pemCertificate))
-        return false;
-
-    std::unique_ptr<WebRTCCertificateGenerator> certificateGenerator = wrapUnique(
-        Platform::current()->createRTCCertificateGenerator());
-
-    std::unique_ptr<WebRTCCertificate> certificate(
-        certificateGenerator->fromPEM(
-            pemPrivateKey.utf8().data(),
-            pemCertificate.utf8().data()));
-    RTCCertificate* jsCertificate = new RTCCertificate(std::move(certificate));
-
-    *value = toV8(jsCertificate, getScriptState()->context()->Global(), isolate());
-    return !value->IsEmpty();
-}
-
 bool SerializedScriptValueReaderForModules::doReadHmacKey(WebCryptoKeyAlgorithm& algorithm, WebCryptoKeyType& type)
 {
     uint32_t lengthBytes;
diff --git a/third_party/WebKit/Source/bindings/modules/v8/ScriptValueSerializerForModules.h b/third_party/WebKit/Source/bindings/modules/v8/ScriptValueSerializerForModules.h
index 81c8eeedce14..96b50f97b8d1 100644
--- a/third_party/WebKit/Source/bindings/modules/v8/ScriptValueSerializerForModules.h
+++ b/third_party/WebKit/Source/bindings/modules/v8/ScriptValueSerializerForModules.h
@@ -6,7 +6,6 @@
 #define ScriptValueSerializerForModules_h
 
 #include "bindings/core/v8/ScriptValueSerializer.h"
-#include "modules/peerconnection/RTCCertificate.h"
 #include "public/platform/WebCrypto.h"
 #include "public/platform/WebCryptoKey.h"
 #include "public/platform/WebCryptoKeyAlgorithm.h"
@@ -25,7 +24,6 @@ public:
 
     void writeDOMFileSystem(int type, const String& name, const String& url);
     bool writeCryptoKey(const WebCryptoKey&);
-    void writeRTCCertificate(const RTCCertificate&);
 
 private:
     void doWriteHmacKey(const WebCryptoKey&);
@@ -55,7 +53,6 @@ public:
 private:
     bool readDOMFileSystem(v8::Local<v8::Value>*);
     bool readCryptoKey(v8::Local<v8::Value>*);
-    bool readRTCCertificate(v8::Local<v8::Value>*);
     bool doReadHmacKey(WebCryptoKeyAlgorithm&, WebCryptoKeyType&);
     bool doReadAesKey(WebCryptoKeyAlgorithm&, WebCryptoKeyType&);
     bool doReadRsaHashedKey(WebCryptoKeyAlgorithm&, WebCryptoKeyType&);
@@ -80,7 +77,6 @@ private:
 
     StateBase* writeDOMFileSystem(v8::Local<v8::Value>, StateBase* next);
     bool writeCryptoKey(v8::Local<v8::Value>);
-    StateBase* writeRTCCertificate(v8::Local<v8::Value>, StateBase* next);
 };
 
 class ScriptValueDeserializerForModules final : public ScriptValueDeserializer {
diff --git a/third_party/WebKit/Source/bindings/modules/v8/V8BindingForModules.cpp b/third_party/WebKit/Source/bindings/modules/v8/V8BindingForModules.cpp
index 4f41b5be783c..46fb9c62d5b5 100644
--- a/third_party/WebKit/Source/bindings/modules/v8/V8BindingForModules.cpp
+++ b/third_party/WebKit/Source/bindings/modules/v8/V8BindingForModules.cpp
@@ -610,17 +610,6 @@ void installOriginTrialsForModules(ScriptState* scriptState)
             V8WorkerNavigatorPartial::installDurableStorage(scriptState, navigator);
         }
     }
-
-    if (!originTrialContext->featureBindingsInstalled("WebBluetooth") && (RuntimeEnabledFeatures::webBluetoothEnabled() || originTrialContext->isFeatureEnabled("WebBluetooth", nullptr))) {
-        v8::Local<v8::String> navigatorName = v8::String::NewFromOneByte(isolate, reinterpret_cast<const uint8_t*>("navigator"), v8::NewStringType::kNormal).ToLocalChecked();
-        if (executionContext->isDocument()) {
-            v8::Local<v8::Object> navigator = global->Get(context, navigatorName).ToLocalChecked()->ToObject();
-            // For global interfaces e.g. BluetoothUUID.
-            V8WindowPartial::installWebBluetooth(scriptState, global);
-            // For navigator interfaces e.g. navigator.bluetooth.
-            V8NavigatorPartial::installWebBluetooth(scriptState, navigator);
-        }
-    }
 }
 
 void registerInstallOriginTrialsForModules()
diff --git a/third_party/WebKit/Source/bindings/modules/v8/generated.gni b/third_party/WebKit/Source/bindings/modules/v8/generated.gni
index 514f2283f61d..2fe76d2fd309 100644
--- a/third_party/WebKit/Source/bindings/modules/v8/generated.gni
+++ b/third_party/WebKit/Source/bindings/modules/v8/generated.gni
@@ -66,16 +66,12 @@ bindings_modules_generated_union_type_files = [
   "$bindings_modules_v8_output_dir/LongOrConstrainLongRange.h",
   "$bindings_modules_v8_output_dir/OffscreenCanvasRenderingContext2DOrWebGLRenderingContextOrWebGL2RenderingContext.cpp",
   "$bindings_modules_v8_output_dir/OffscreenCanvasRenderingContext2DOrWebGLRenderingContextOrWebGL2RenderingContext.h",
-  "$bindings_modules_v8_output_dir/RTCIceCandidateInitOrRTCIceCandidate.cpp",
-  "$bindings_modules_v8_output_dir/RTCIceCandidateInitOrRTCIceCandidate.h",
   "$bindings_modules_v8_output_dir/RenderingContext.cpp",
   "$bindings_modules_v8_output_dir/RenderingContext.h",
   "$bindings_modules_v8_output_dir/RequestOrUSVString.cpp",
   "$bindings_modules_v8_output_dir/RequestOrUSVString.h",
   "$bindings_modules_v8_output_dir/ServiceWorkerOrMessagePort.cpp",
   "$bindings_modules_v8_output_dir/ServiceWorkerOrMessagePort.h",
-  "$bindings_modules_v8_output_dir/StringOrArrayBufferOrNFCMessage.cpp",
-  "$bindings_modules_v8_output_dir/StringOrArrayBufferOrNFCMessage.h",
   "$bindings_modules_v8_output_dir/StringOrCanvasGradientOrCanvasPattern.cpp",
   "$bindings_modules_v8_output_dir/StringOrCanvasGradientOrCanvasPattern.h",
   "$bindings_modules_v8_output_dir/StringOrStringSequence.cpp",
@@ -84,8 +80,6 @@ bindings_modules_generated_union_type_files = [
   "$bindings_modules_v8_output_dir/StringOrStringSequenceOrConstrainDOMStringParameters.h",
   "$bindings_modules_v8_output_dir/StringOrStringSequenceOrDOMStringList.cpp",
   "$bindings_modules_v8_output_dir/StringOrStringSequenceOrDOMStringList.h",
-  "$bindings_modules_v8_output_dir/StringOrUnsignedLong.cpp",
-  "$bindings_modules_v8_output_dir/StringOrUnsignedLong.h",
   "$bindings_modules_v8_output_dir/UnsignedLongOrUnsignedLongSequence.cpp",
   "$bindings_modules_v8_output_dir/UnsignedLongOrUnsignedLongSequence.h",
 ]
diff --git a/third_party/WebKit/Source/bindings/modules/v8/generated.gypi b/third_party/WebKit/Source/bindings/modules/v8/generated.gypi
index 00ea1ae2c027..37e5b339bf5a 100644
--- a/third_party/WebKit/Source/bindings/modules/v8/generated.gypi
+++ b/third_party/WebKit/Source/bindings/modules/v8/generated.gypi
@@ -30,16 +30,12 @@
       '<(bindings_modules_v8_output_dir)/LongOrConstrainLongRange.h',
       '<(bindings_modules_v8_output_dir)/OffscreenCanvasRenderingContext2DOrWebGLRenderingContextOrWebGL2RenderingContext.cpp',
       '<(bindings_modules_v8_output_dir)/OffscreenCanvasRenderingContext2DOrWebGLRenderingContextOrWebGL2RenderingContext.h',
-      '<(bindings_modules_v8_output_dir)/RTCIceCandidateInitOrRTCIceCandidate.cpp',
-      '<(bindings_modules_v8_output_dir)/RTCIceCandidateInitOrRTCIceCandidate.h',
       '<(bindings_modules_v8_output_dir)/RenderingContext.cpp',
       '<(bindings_modules_v8_output_dir)/RenderingContext.h',
       '<(bindings_modules_v8_output_dir)/RequestOrUSVString.cpp',
       '<(bindings_modules_v8_output_dir)/RequestOrUSVString.h',
       '<(bindings_modules_v8_output_dir)/ServiceWorkerOrMessagePort.cpp',
       '<(bindings_modules_v8_output_dir)/ServiceWorkerOrMessagePort.h',
-      '<(bindings_modules_v8_output_dir)/StringOrArrayBufferOrNFCMessage.cpp',
-      '<(bindings_modules_v8_output_dir)/StringOrArrayBufferOrNFCMessage.h',
       '<(bindings_modules_v8_output_dir)/StringOrCanvasGradientOrCanvasPattern.cpp',
       '<(bindings_modules_v8_output_dir)/StringOrCanvasGradientOrCanvasPattern.h',
       '<(bindings_modules_v8_output_dir)/StringOrStringSequence.cpp',
@@ -48,8 +44,6 @@
       '<(bindings_modules_v8_output_dir)/StringOrStringSequenceOrConstrainDOMStringParameters.h',
       '<(bindings_modules_v8_output_dir)/StringOrStringSequenceOrDOMStringList.cpp',
       '<(bindings_modules_v8_output_dir)/StringOrStringSequenceOrDOMStringList.h',
-      '<(bindings_modules_v8_output_dir)/StringOrUnsignedLong.cpp',
-      '<(bindings_modules_v8_output_dir)/StringOrUnsignedLong.h',
       '<(bindings_modules_v8_output_dir)/UnsignedLongOrUnsignedLongSequence.cpp',
       '<(bindings_modules_v8_output_dir)/UnsignedLongOrUnsignedLongSequence.h',
     ],
diff --git a/third_party/WebKit/Source/build/scripts/templates/EventFactory.cpp.tmpl b/third_party/WebKit/Source/build/scripts/templates/EventFactory.cpp.tmpl
index cd9f0a97b1df..49ccb9ee2f0c 100644
--- a/third_party/WebKit/Source/build/scripts/templates/EventFactory.cpp.tmpl
+++ b/third_party/WebKit/Source/build/scripts/templates/EventFactory.cpp.tmpl
@@ -23,9 +23,9 @@ namespace blink {
     {% endif %}
         {% if not event|script_name|create_event_whitelist %}
         {% if event|script_name|create_event_deprecate_list %}
-        Deprecation::countDeprecation(executionContext, UseCounter::{{event|script_name|deprecate_name}});
+        //Deprecation::countDeprecation(executionContext, UseCounter::{{event|script_name|deprecate_name}});
         {% else %}
-        UseCounter::count(executionContext, UseCounter::{{event|script_name|measure_name}});
+        //UseCounter::count(executionContext, UseCounter::{{event|script_name|measure_name}});
         {% endif %}
         {% endif %}
         return {{event|cpp_name}}::create();
diff --git a/third_party/WebKit/Source/modules/BUILD.gn b/third_party/WebKit/Source/modules/BUILD.gn
index 56991f6b8fd1..c092e9b38c29 100644
--- a/third_party/WebKit/Source/modules/BUILD.gn
+++ b/third_party/WebKit/Source/modules/BUILD.gn
@@ -57,10 +57,10 @@ component("modules") {
     ":make_modules_generated",
     "//components/webmessaging/public/interfaces:interfaces_blink",
     "//device/battery:mojo_bindings_blink",
-    "//device/nfc:mojo_bindings_blink",
-    "//device/usb/public/interfaces:interfaces_blink",
+    #"//device/nfc:mojo_bindings_blink",
+    #"//device/usb/public/interfaces:interfaces_blink",
     "//device/vibration:mojo_bindings_blink",
-    "//device/vr:mojo_bindings_blink",
+    #"//device/vr:mojo_bindings_blink",
     "//media/mojo/interfaces:image_capture_blink",
     "//third_party/WebKit/Source/core",
     "//third_party/WebKit/public:mojo_bindings",
diff --git a/third_party/WebKit/Source/modules/mediastream/WindowMediaStream.idl b/third_party/WebKit/Source/modules/mediastream/WindowMediaStream.idl
index fb06a6a22e1f..35dcfb90dfb2 100644
--- a/third_party/WebKit/Source/modules/mediastream/WindowMediaStream.idl
+++ b/third_party/WebKit/Source/modules/mediastream/WindowMediaStream.idl
@@ -7,5 +7,5 @@
 ] partial interface Window {
     attribute MediaStreamConstructor webkitMediaStream;
 
-    attribute RTCPeerConnectionConstructor webkitRTCPeerConnection;
+    //attribute RTCPeerConnectionConstructor webkitRTCPeerConnection;
 };
diff --git a/third_party/WebKit/Source/modules/modules.gypi b/third_party/WebKit/Source/modules/modules.gypi
index b5e2a07d9432..7c68d5e4abaf 100644
--- a/third_party/WebKit/Source/modules/modules.gypi
+++ b/third_party/WebKit/Source/modules/modules.gypi
@@ -19,13 +19,6 @@
       'background_sync/SyncEvent.idl',
       'background_sync/SyncManager.idl',
       'battery/BatteryManager.idl',
-      'bluetooth/Bluetooth.idl',
-      'bluetooth/BluetoothDevice.idl',
-      'bluetooth/BluetoothCharacteristicProperties.idl',
-      'bluetooth/BluetoothRemoteGATTCharacteristic.idl',
-      'bluetooth/BluetoothRemoteGATTServer.idl',
-      'bluetooth/BluetoothRemoteGATTService.idl',
-      'bluetooth/BluetoothUUID.idl',
       'broadcastchannel/BroadcastChannel.idl',
       'cachestorage/Cache.idl',
       'cachestorage/CacheStorage.idl',
@@ -82,10 +75,6 @@
       'filesystem/FileWriterSync.idl',
       'filesystem/Metadata.idl',
       'filesystem/MetadataCallback.idl',
-      'gamepad/Gamepad.idl',
-      'gamepad/GamepadButton.idl',
-      'gamepad/GamepadEvent.idl',
-      'gamepad/GamepadList.idl',
       'geolocation/Coordinates.idl',
       'geolocation/Geolocation.idl',
       'geolocation/Geoposition.idl',
@@ -135,8 +124,6 @@
       'mediastream/NavigatorUserMediaSuccessCallback.idl',
       'mediastream/SourceInfo.idl',
       'netinfo/NetworkInformation.idl',
-      'nfc/MessageCallback.idl',
-      'nfc/NFC.idl',
       'notifications/Notification.idl',
       'notifications/NotificationEvent.idl',
       'notifications/NotificationPermissionCallback.idl',
@@ -145,33 +132,12 @@
       'payments/PaymentRequestUpdateEvent.idl',
       'payments/PaymentRequest.idl',
       'payments/PaymentResponse.idl',
-      'peerconnection/RTCCertificate.idl',
-      'peerconnection/RTCDTMFSender.idl',
-      'peerconnection/RTCDTMFToneChangeEvent.idl',
-      'peerconnection/RTCDataChannel.idl',
-      'peerconnection/RTCDataChannelEvent.idl',
-      'peerconnection/RTCIceCandidate.idl',
-      'peerconnection/RTCIceCandidateEvent.idl',
-      'peerconnection/RTCPeerConnection.idl',
-      'peerconnection/RTCPeerConnectionErrorCallback.idl',
-      'peerconnection/RTCSessionDescription.idl',
-      'peerconnection/RTCSessionDescriptionCallback.idl',
-      'peerconnection/RTCStatsCallback.idl',
-      'peerconnection/RTCStatsReport.idl',
-      'peerconnection/RTCStatsResponse.idl',
       'permissions/Permissions.idl',
       'permissions/PermissionStatus.idl',
       'plugins/MimeType.idl',
       'plugins/MimeTypeArray.idl',
       'plugins/Plugin.idl',
       'plugins/PluginArray.idl',
-      'presentation/Presentation.idl',
-      'presentation/PresentationAvailability.idl',
-      'presentation/PresentationConnection.idl',
-      'presentation/PresentationConnectionAvailableEvent.idl',
-      'presentation/PresentationConnectionCloseEvent.idl',
-      'presentation/PresentationReceiver.idl',
-      'presentation/PresentationRequest.idl',
       'push_messaging/PushEvent.idl',
       'push_messaging/PushManager.idl',
       'push_messaging/PushMessageData.idl',
@@ -218,12 +184,6 @@
       'speech/SpeechSynthesisVoice.idl',
       'storage/Storage.idl',
       'storage/StorageEvent.idl',
-      'vr/VRDisplay.idl',
-      'vr/VRDisplayCapabilities.idl',
-      'vr/VREyeParameters.idl',
-      'vr/VRFieldOfView.idl',
-      'vr/VRPose.idl',
-      'vr/VRStageParameters.idl',
       'webaudio/AnalyserNode.idl',
       'webaudio/AudioBuffer.idl',
       'webaudio/AudioBufferCallback.idl',
@@ -318,19 +278,6 @@
       'webmidi/MIDIPort.idl',
       'websockets/CloseEvent.idl',
       'websockets/WebSocket.idl',
-      'webusb/USB.idl',
-      'webusb/USBAlternateInterface.idl',
-      'webusb/USBEndpoint.idl',
-      'webusb/USBConfiguration.idl',
-      'webusb/USBConnectionEvent.idl',
-      'webusb/USBDevice.idl',
-      'webusb/USBInTransferResult.idl',
-      'webusb/USBInterface.idl',
-      'webusb/USBIsochronousInTransferPacket.idl',
-      'webusb/USBIsochronousInTransferResult.idl',
-      'webusb/USBIsochronousOutTransferPacket.idl',
-      'webusb/USBIsochronousOutTransferResult.idl',
-      'webusb/USBOutTransferResult.idl',
       'worklet/Worklet.idl',
     ],
     # 'partial interface' or target (right side of) 'implements'
@@ -340,7 +287,6 @@
       'background_sync/ServiceWorkerRegistrationSync.idl',
       'battery/NavigatorBattery.idl',
       'beacon/NavigatorBeacon.idl',
-      'bluetooth/NavigatorBluetooth.idl',
       'cachestorage/WindowCacheStorage.idl',
       'cachestorage/WorkerCacheStorage.idl',
       'canvas/HTMLCanvasElementModule.idl',
@@ -363,7 +309,6 @@
       'filesystem/HTMLInputElementFileSystem.idl',
       'filesystem/SharedWorkerGlobalScopeFileSystem.idl',
       'filesystem/WindowFileSystem.idl',
-      'gamepad/NavigatorGamepad.idl',
       'geolocation/NavigatorGeolocation.idl',
       'indexeddb/WindowIndexedDatabase.idl',
       'indexeddb/WorkerGlobalScopeIndexedDatabase.idl',
@@ -380,7 +325,6 @@
       'mediastream/URLMediaStream.idl',
       'mediastream/WindowMediaStream.idl',
       'navigatorcontentutils/NavigatorContentUtils.idl',
-      'nfc/NavigatorNFC.idl',
       'netinfo/NavigatorNetworkInformation.idl',
       'netinfo/WorkerNavigatorNetworkInformation.idl',
       'notifications/ServiceWorkerGlobalScopeNotifications.idl',
@@ -389,7 +333,6 @@
       'permissions/NavigatorPermissions.idl',
       'permissions/WorkerNavigatorPermissions.idl',
       'plugins/NavigatorPlugins.idl',
-      'presentation/NavigatorPresentation.idl',
       'push_messaging/ServiceWorkerGlobalScopePush.idl',
       'push_messaging/ServiceWorkerRegistrationPush.idl',
       'quota/NavigatorStorageQuota.idl',
@@ -403,14 +346,12 @@
       'srcobject/HTMLMediaElementSrcObject.idl',
       'storage/WindowStorage.idl',
       'vibration/NavigatorVibration.idl',
-      'vr/NavigatorVR.idl',
       'wake_lock/ScreenWakeLock.idl',
       'webaudio/WindowWebAudio.idl',
       'webdatabase/WindowWebDatabase.idl',
       'webgl/WebGL2RenderingContextBase.idl',
       'webgl/WebGLRenderingContextBase.idl',
       'webmidi/NavigatorWebMIDI.idl',
-      'webusb/NavigatorUSB.idl',
     ],
     # interfaces that inherit from Event
     'modules_event_idl_files': [
@@ -421,18 +362,12 @@
       'device_orientation/DeviceOrientationEvent.idl',
       'encryptedmedia/MediaEncryptedEvent.idl',
       'encryptedmedia/MediaKeyMessageEvent.idl',
-      'gamepad/GamepadEvent.idl',
       'indexeddb/IDBVersionChangeEvent.idl',
       'mediarecorder/BlobEvent.idl',
       'mediastream/MediaStreamEvent.idl',
       'mediastream/MediaStreamTrackEvent.idl',
       'notifications/NotificationEvent.idl',
       'payments/PaymentRequestUpdateEvent.idl',
-      'peerconnection/RTCDTMFToneChangeEvent.idl',
-      'peerconnection/RTCDataChannelEvent.idl',
-      'peerconnection/RTCIceCandidateEvent.idl',
-      'presentation/PresentationConnectionAvailableEvent.idl',
-      'presentation/PresentationConnectionCloseEvent.idl',
       'push_messaging/PushEvent.idl',
       'sensor/SensorErrorEvent.idl',
       'sensor/SensorReadingEvent.idl',
@@ -456,8 +391,6 @@
     'modules_dictionary_idl_files': [
       'app_banner/BeforeInstallPromptEventInit.idl',
       'background_sync/SyncEventInit.idl',
-      'bluetooth/BluetoothScanFilter.idl',
-      'bluetooth/RequestDeviceOptions.idl',
       'cachestorage/CacheQueryOptions.idl',
       'canvas2d/Canvas2DContextAttributes.idl',
       'canvas2d/HitRegionOptions.idl',
@@ -476,7 +409,6 @@
       'encryptedmedia/MediaKeySystemConfiguration.idl',
       'encryptedmedia/MediaKeySystemMediaCapability.idl',
       'filesystem/FileSystemFlags.idl',
-      'gamepad/GamepadEventInit.idl',
       'geolocation/PositionOptions.idl',
       'imagecapture/PhotoSettings.idl',
       'indexeddb/IDBIndexParameters.idl',
@@ -499,10 +431,6 @@
       'mediastream/MediaTrackConstraints.idl',
       'mediastream/MediaTrackSettings.idl',
       'mediastream/MediaTrackSupportedConstraints.idl',
-      'nfc/NFCMessage.idl',
-      'nfc/NFCPushOptions.idl',
-      'nfc/NFCRecord.idl',
-      'nfc/NFCWatchOptions.idl',
       'notifications/GetNotificationOptions.idl',
       'notifications/NotificationAction.idl',
       'notifications/NotificationEventInit.idl',
@@ -515,17 +443,9 @@
       'payments/PaymentOptions.idl',
       'payments/PaymentRequestUpdateEventInit.idl',
       'payments/PaymentShippingOption.idl',
-      'peerconnection/RTCAnswerOptions.idl',
-      'peerconnection/RTCDTMFToneChangeEventInit.idl',
-      'peerconnection/RTCIceCandidateInit.idl',
-      'peerconnection/RTCOfferAnswerOptions.idl',
-      'peerconnection/RTCOfferOptions.idl',
-      'peerconnection/RTCSessionDescriptionInit.idl',
       'permissions/MidiPermissionDescriptor.idl',
       'permissions/PermissionDescriptor.idl',
       'permissions/PushPermissionDescriptor.idl',
-      'presentation/PresentationConnectionAvailableEventInit.idl',
-      'presentation/PresentationConnectionCloseEventInit.idl',
       'push_messaging/PushEventInit.idl',
       'push_messaging/PushSubscriptionOptions.idl',
       'quota/StorageEstimate.idl',
@@ -544,8 +464,6 @@
       'speech/SpeechRecognitionErrorInit.idl',
       'speech/SpeechRecognitionEventInit.idl',
       'storage/StorageEventInit.idl',
-      'vr/VRFieldOfViewInit.idl',
-      'vr/VRLayer.idl',
       'webaudio/PeriodicWaveConstraints.idl',
       'webgl/WebGLContextAttributes.idl',
       'webgl/WebGLContextEventInit.idl',
@@ -553,10 +471,6 @@
       'webmidi/MIDIMessageEventInit.idl',
       'webmidi/MIDIOptions.idl',
       'websockets/CloseEventInit.idl',
-      'webusb/USBConnectionEventInit.idl',
-      'webusb/USBControlTransferParameters.idl',
-      'webusb/USBDeviceFilter.idl',
-      'webusb/USBDeviceRequestOptions.idl',
     ],
     'generated_modules_files': [
       # .cpp files from make_modules_generated actions.
@@ -574,10 +488,6 @@
       '<(blink_modules_output_dir)/app_banner/BeforeInstallPromptEventInit.h',
       '<(blink_modules_output_dir)/background_sync/SyncEventInit.cpp',
       '<(blink_modules_output_dir)/background_sync/SyncEventInit.h',
-      '<(blink_modules_output_dir)/bluetooth/BluetoothScanFilter.cpp',
-      '<(blink_modules_output_dir)/bluetooth/BluetoothScanFilter.h',
-      '<(blink_modules_output_dir)/bluetooth/RequestDeviceOptions.cpp',
-      '<(blink_modules_output_dir)/bluetooth/RequestDeviceOptions.h',
       '<(blink_modules_output_dir)/cachestorage/CacheQueryOptions.cpp',
       '<(blink_modules_output_dir)/cachestorage/CacheQueryOptions.h',
       '<(blink_modules_output_dir)/canvas2d/Canvas2DContextAttributes.cpp',
@@ -614,8 +524,6 @@
       '<(blink_modules_output_dir)/encryptedmedia/MediaKeySystemMediaCapability.h',
       '<(blink_modules_output_dir)/filesystem/FileSystemFlags.cpp',
       '<(blink_modules_output_dir)/filesystem/FileSystemFlags.h',
-      '<(blink_modules_output_dir)/gamepad/GamepadEventInit.cpp',
-      '<(blink_modules_output_dir)/gamepad/GamepadEventInit.h',
       '<(blink_modules_output_dir)/geolocation/PositionOptions.cpp',
       '<(blink_modules_output_dir)/geolocation/PositionOptions.h',
       '<(blink_modules_output_dir)/imagecapture/PhotoSettings.cpp',
@@ -660,14 +568,6 @@
       '<(blink_modules_output_dir)/mediastream/MediaTrackSettings.h',
       '<(blink_modules_output_dir)/mediastream/MediaTrackSupportedConstraints.cpp',
       '<(blink_modules_output_dir)/mediastream/MediaTrackSupportedConstraints.h',
-      '<(blink_modules_output_dir)/nfc/NFCMessage.cpp',
-      '<(blink_modules_output_dir)/nfc/NFCMessage.h',
-      '<(blink_modules_output_dir)/nfc/NFCPushOptions.cpp',
-      '<(blink_modules_output_dir)/nfc/NFCPushOptions.h',
-      '<(blink_modules_output_dir)/nfc/NFCRecord.cpp',
-      '<(blink_modules_output_dir)/nfc/NFCRecord.h',
-      '<(blink_modules_output_dir)/nfc/NFCWatchOptions.cpp',
-      '<(blink_modules_output_dir)/nfc/NFCWatchOptions.h',
       '<(blink_modules_output_dir)/notifications/GetNotificationOptions.cpp',
       '<(blink_modules_output_dir)/notifications/GetNotificationOptions.h',
       '<(blink_modules_output_dir)/notifications/NotificationAction.cpp',
@@ -692,28 +592,12 @@
       '<(blink_modules_output_dir)/payments/PaymentRequestUpdateEventInit.h',
       '<(blink_modules_output_dir)/payments/PaymentShippingOption.cpp',
       '<(blink_modules_output_dir)/payments/PaymentShippingOption.h',
-      '<(blink_modules_output_dir)/peerconnection/RTCAnswerOptions.cpp',
-      '<(blink_modules_output_dir)/peerconnection/RTCAnswerOptions.h',
-      '<(blink_modules_output_dir)/peerconnection/RTCDTMFToneChangeEventInit.cpp',
-      '<(blink_modules_output_dir)/peerconnection/RTCDTMFToneChangeEventInit.h',
-      '<(blink_modules_output_dir)/peerconnection/RTCIceCandidateInit.cpp',
-      '<(blink_modules_output_dir)/peerconnection/RTCIceCandidateInit.h',
-      '<(blink_modules_output_dir)/peerconnection/RTCOfferAnswerOptions.cpp',
-      '<(blink_modules_output_dir)/peerconnection/RTCOfferAnswerOptions.h',
-      '<(blink_modules_output_dir)/peerconnection/RTCOfferOptions.cpp',
-      '<(blink_modules_output_dir)/peerconnection/RTCOfferOptions.h',
-      '<(blink_modules_output_dir)/peerconnection/RTCSessionDescriptionInit.cpp',
-      '<(blink_modules_output_dir)/peerconnection/RTCSessionDescriptionInit.h',
       '<(blink_modules_output_dir)/permissions/MidiPermissionDescriptor.cpp',
       '<(blink_modules_output_dir)/permissions/MidiPermissionDescriptor.h',
       '<(blink_modules_output_dir)/permissions/PermissionDescriptor.cpp',
       '<(blink_modules_output_dir)/permissions/PermissionDescriptor.h',
       '<(blink_modules_output_dir)/permissions/PushPermissionDescriptor.cpp',
       '<(blink_modules_output_dir)/permissions/PushPermissionDescriptor.h',
-      '<(blink_modules_output_dir)/presentation/PresentationConnectionAvailableEventInit.cpp',
-      '<(blink_modules_output_dir)/presentation/PresentationConnectionAvailableEventInit.h',
-      '<(blink_modules_output_dir)/presentation/PresentationConnectionCloseEventInit.cpp',
-      '<(blink_modules_output_dir)/presentation/PresentationConnectionCloseEventInit.h',
       '<(blink_modules_output_dir)/push_messaging/PushEventInit.cpp',
       '<(blink_modules_output_dir)/push_messaging/PushEventInit.h',
       '<(blink_modules_output_dir)/push_messaging/PushSubscriptionOptions.cpp',
@@ -750,10 +634,6 @@
       '<(blink_modules_output_dir)/speech/SpeechRecognitionEventInit.h',
       '<(blink_modules_output_dir)/storage/StorageEventInit.cpp',
       '<(blink_modules_output_dir)/storage/StorageEventInit.h',
-      '<(blink_modules_output_dir)/vr/VRFieldOfViewInit.cpp',
-      '<(blink_modules_output_dir)/vr/VRFieldOfViewInit.h',
-      '<(blink_modules_output_dir)/vr/VRLayer.cpp',
-      '<(blink_modules_output_dir)/vr/VRLayer.h',
       '<(blink_modules_output_dir)/webaudio/PeriodicWaveConstraints.cpp',
       '<(blink_modules_output_dir)/webaudio/PeriodicWaveConstraints.h',
       '<(blink_modules_output_dir)/webgl/WebGLContextAttributes.cpp',
@@ -768,14 +648,6 @@
       '<(blink_modules_output_dir)/webmidi/MIDIOptions.h',
       '<(blink_modules_output_dir)/websockets/CloseEventInit.cpp',
       '<(blink_modules_output_dir)/websockets/CloseEventInit.h',
-      '<(blink_modules_output_dir)/webusb/USBConnectionEventInit.cpp',
-      '<(blink_modules_output_dir)/webusb/USBConnectionEventInit.h',
-      '<(blink_modules_output_dir)/webusb/USBControlTransferParameters.cpp',
-      '<(blink_modules_output_dir)/webusb/USBControlTransferParameters.h',
-      '<(blink_modules_output_dir)/webusb/USBDeviceFilter.cpp',
-      '<(blink_modules_output_dir)/webusb/USBDeviceFilter.h',
-      '<(blink_modules_output_dir)/webusb/USBDeviceRequestOptions.cpp',
-      '<(blink_modules_output_dir)/webusb/USBDeviceRequestOptions.h',
     ],
     'modules_files': [
       '<@(extra_blink_module_files)',
@@ -875,26 +747,6 @@
       'battery/battery_status.h',
       'beacon/NavigatorBeacon.cpp',
       'beacon/NavigatorBeacon.h',
-      'bluetooth/Bluetooth.cpp',
-      'bluetooth/Bluetooth.h',
-      'bluetooth/BluetoothCharacteristicProperties.cpp',
-      'bluetooth/BluetoothCharacteristicProperties.h',
-      'bluetooth/BluetoothDevice.cpp',
-      'bluetooth/BluetoothDevice.h',
-      'bluetooth/BluetoothError.cpp',
-      'bluetooth/BluetoothError.h',
-      'bluetooth/BluetoothRemoteGATTCharacteristic.cpp',
-      'bluetooth/BluetoothRemoteGATTCharacteristic.h',
-      'bluetooth/BluetoothRemoteGATTServer.cpp',
-      'bluetooth/BluetoothRemoteGATTServer.h',
-      'bluetooth/BluetoothRemoteGATTService.cpp',
-      'bluetooth/BluetoothRemoteGATTService.h',
-      'bluetooth/BluetoothSupplement.cpp',
-      'bluetooth/BluetoothSupplement.h',
-      'bluetooth/BluetoothUUID.cpp',
-      'bluetooth/BluetoothUUID.h',
-      'bluetooth/NavigatorBluetooth.cpp',
-      'bluetooth/NavigatorBluetooth.h',
       'broadcastchannel/BroadcastChannel.cpp',
       'broadcastchannel/BroadcastChannel.h',
       'cachestorage/Cache.cpp',
@@ -1142,18 +994,6 @@
       'filesystem/SyncCallbackHelper.h',
       'filesystem/WorkerGlobalScopeFileSystem.cpp',
       'filesystem/WorkerGlobalScopeFileSystem.h',
-      'gamepad/Gamepad.cpp',
-      'gamepad/Gamepad.h',
-      'gamepad/GamepadButton.cpp',
-      'gamepad/GamepadButton.h',
-      'gamepad/GamepadDispatcher.cpp',
-      'gamepad/GamepadDispatcher.h',
-      'gamepad/GamepadEvent.cpp',
-      'gamepad/GamepadEvent.h',
-      'gamepad/GamepadList.cpp',
-      'gamepad/GamepadList.h',
-      'gamepad/NavigatorGamepad.cpp',
-      'gamepad/NavigatorGamepad.h',
       'geolocation/Coordinates.cpp',
       'geolocation/Geolocation.cpp',
       'geolocation/GeoNotifier.cpp',
@@ -1323,12 +1163,6 @@
       'netinfo/NetworkInformation.h',
       'netinfo/WorkerNavigatorNetworkInformation.cpp',
       'netinfo/WorkerNavigatorNetworkInformation.h',
-      'nfc/NavigatorNFC.cpp',
-      'nfc/NavigatorNFC.h',
-      'nfc/NFC.cpp',
-      'nfc/NFC.h',
-      'nfc/NFCError.cpp',
-      'nfc/NFCError.h',
       'notifications/Notification.cpp',
       'notifications/Notification.h',
       'notifications/NotificationData.cpp',
@@ -1363,40 +1197,6 @@
       'payments/PaymentUpdater.h',
       'payments/PaymentsValidators.cpp',
       'payments/PaymentsValidators.h',
-      'peerconnection/RTCCertificate.cpp',
-      'peerconnection/RTCCertificate.h',
-      'peerconnection/RTCDTMFSender.cpp',
-      'peerconnection/RTCDTMFSender.h',
-      'peerconnection/RTCDTMFToneChangeEvent.cpp',
-      'peerconnection/RTCDTMFToneChangeEvent.h',
-      'peerconnection/RTCDataChannel.cpp',
-      'peerconnection/RTCDataChannel.h',
-      'peerconnection/RTCDataChannelEvent.cpp',
-      'peerconnection/RTCDataChannelEvent.h',
-      'peerconnection/RTCIceCandidate.cpp',
-      'peerconnection/RTCIceCandidate.h',
-      'peerconnection/RTCIceCandidateEvent.cpp',
-      'peerconnection/RTCIceCandidateEvent.h',
-      'peerconnection/RTCPeerConnection.cpp',
-      'peerconnection/RTCPeerConnection.h',
-      'peerconnection/RTCPeerConnectionErrorCallback.h',
-      'peerconnection/RTCSessionDescription.cpp',
-      'peerconnection/RTCSessionDescription.h',
-      'peerconnection/RTCSessionDescriptionCallback.h',
-      'peerconnection/RTCSessionDescriptionRequestImpl.cpp',
-      'peerconnection/RTCSessionDescriptionRequestImpl.h',
-      'peerconnection/RTCSessionDescriptionRequestPromiseImpl.cpp',
-      'peerconnection/RTCSessionDescriptionRequestPromiseImpl.h',
-      'peerconnection/RTCStatsReport.cpp',
-      'peerconnection/RTCStatsReport.h',
-      'peerconnection/RTCStatsRequestImpl.cpp',
-      'peerconnection/RTCStatsRequestImpl.h',
-      'peerconnection/RTCStatsResponse.cpp',
-      'peerconnection/RTCStatsResponse.h',
-      'peerconnection/RTCVoidRequestImpl.cpp',
-      'peerconnection/RTCVoidRequestImpl.h',
-      'peerconnection/RTCVoidRequestPromiseImpl.cpp',
-      'peerconnection/RTCVoidRequestPromiseImpl.h',
       'permissions/NavigatorPermissions.cpp',
       'permissions/NavigatorPermissions.h',
       'permissions/PermissionController.cpp',
@@ -1423,30 +1223,6 @@
       'plugins/NavigatorPlugins.h',
       'plugins/PluginOcclusionSupport.cpp',
       'plugins/PluginOcclusionSupport.h',
-      'presentation/NavigatorPresentation.cpp',
-      'presentation/NavigatorPresentation.h',
-      'presentation/Presentation.cpp',
-      'presentation/Presentation.h',
-      'presentation/PresentationAvailability.cpp',
-      'presentation/PresentationAvailability.h',
-      'presentation/PresentationAvailabilityCallbacks.cpp',
-      'presentation/PresentationAvailabilityCallbacks.h',
-      'presentation/PresentationConnection.cpp',
-      'presentation/PresentationConnection.h',
-      'presentation/PresentationConnectionCallbacks.cpp',
-      'presentation/PresentationConnectionCallbacks.h',
-      'presentation/PresentationConnectionAvailableEvent.cpp',
-      'presentation/PresentationConnectionAvailableEvent.h',
-      'presentation/PresentationConnectionCloseEvent.cpp',
-      'presentation/PresentationConnectionCloseEvent.h',
-      'presentation/PresentationController.cpp',
-      'presentation/PresentationController.h',
-      'presentation/PresentationError.cpp',
-      'presentation/PresentationError.h',
-      'presentation/PresentationReceiver.cpp',
-      'presentation/PresentationReceiver.h',
-      'presentation/PresentationRequest.cpp',
-      'presentation/PresentationRequest.h',
       'push_messaging/PushController.cpp',
       'push_messaging/PushController.h',
       'push_messaging/PushError.cpp',
@@ -1615,25 +1391,6 @@
       'vibration/NavigatorVibration.h',
       'vibration/VibrationController.cpp',
       'vibration/VibrationController.h',
-      'vr/NavigatorVR.cpp',
-      'vr/NavigatorVR.h',
-      'vr/VRController.cpp',
-      'vr/VRController.h',
-      'vr/VRDisplay.cpp',
-      'vr/VRDisplay.h',
-      'vr/VRDisplayCapabilities.cpp',
-      'vr/VRDisplayCapabilities.h',
-      'vr/VRDisplayCollection.cpp',
-      'vr/VRDisplayCollection.h',
-      'vr/VREyeParameters.cpp',
-      'vr/VREyeParameters.h',
-      'vr/VRFieldOfView.h',
-      'vr/VRGetDevicesCallback.cpp',
-      'vr/VRGetDevicesCallback.h',
-      'vr/VRPose.cpp',
-      'vr/VRPose.h',
-      'vr/VRStageParameters.cpp',
-      'vr/VRStageParameters.h',
       'wake_lock/ScreenWakeLock.cpp',
       'wake_lock/ScreenWakeLock.h',
       'webaudio/AbstractAudioContext.cpp',
@@ -1949,28 +1706,6 @@
       'websockets/WebSocketFrame.h',
       'websockets/WorkerWebSocketChannel.cpp',
       'websockets/WorkerWebSocketChannel.h',
-      'webusb/NavigatorUSB.cpp',
-      'webusb/NavigatorUSB.h',
-      'webusb/USB.cpp',
-      'webusb/USB.h',
-      'webusb/USBAlternateInterface.cpp',
-      'webusb/USBAlternateInterface.h',
-      'webusb/USBConfiguration.cpp',
-      'webusb/USBConfiguration.h',
-      'webusb/USBConnectionEvent.cpp',
-      'webusb/USBConnectionEvent.h',
-      'webusb/USBDevice.cpp',
-      'webusb/USBDevice.h',
-      'webusb/USBEndpoint.cpp',
-      'webusb/USBEndpoint.h',
-      'webusb/USBInTransferResult.h',
-      'webusb/USBInterface.cpp',
-      'webusb/USBInterface.h',
-      'webusb/USBIsochronousInTransferPacket.h',
-      'webusb/USBIsochronousInTransferResult.h',
-      'webusb/USBIsochronousOutTransferPacket.h',
-      'webusb/USBIsochronousOutTransferResult.h',
-      'webusb/USBOutTransferResult.h',
       'worklet/Worklet.cpp',
       'worklet/Worklet.h',
     ],
@@ -1978,7 +1713,6 @@
     'modules_testing_dependency_idl_files' : [
       'accessibility/testing/InternalsAccessibility.idl',
       'navigatorcontentutils/testing/InternalsNavigatorContentUtils.idl',
-      'peerconnection/testing/InternalsRTCCertificate.idl',
       'serviceworkers/testing/InternalsServiceWorker.idl',
       'speech/testing/InternalsSpeechSynthesis.idl',
       'vibration/testing/InternalsVibration.idl',
diff --git a/third_party/WebKit/Source/platform/blink_platform.gypi b/third_party/WebKit/Source/platform/blink_platform.gypi
index 2c89da80f861..a3e07cb22699 100644
--- a/third_party/WebKit/Source/platform/blink_platform.gypi
+++ b/third_party/WebKit/Source/platform/blink_platform.gypi
@@ -338,15 +338,6 @@
       'exported/WebPrerenderingSupport.cpp',
       'exported/WebPresentationAvailabilityObserver.cpp',
       'exported/WebPresentationController.cpp',
-      'exported/WebRTCAnswerOptions.cpp',
-      'exported/WebRTCConfiguration.cpp',
-      'exported/WebRTCICECandidate.cpp',
-      'exported/WebRTCOfferOptions.cpp',
-      'exported/WebRTCSessionDescription.cpp',
-      'exported/WebRTCSessionDescriptionRequest.cpp',
-      'exported/WebRTCStatsRequest.cpp',
-      'exported/WebRTCStatsResponse.cpp',
-      'exported/WebRTCVoidRequest.cpp',
       'exported/WebScrollbarImpl.cpp',
       'exported/WebScrollbarImpl.h',
       'exported/WebScrollbarThemeClientImpl.cpp',
diff --git a/third_party/WebKit/Source/web/FrameLoaderClientImpl.cpp b/third_party/WebKit/Source/web/FrameLoaderClientImpl.cpp
index 1142b5e05cfd..58ba1ebec914 100644
--- a/third_party/WebKit/Source/web/FrameLoaderClientImpl.cpp
+++ b/third_party/WebKit/Source/web/FrameLoaderClientImpl.cpp
@@ -57,13 +57,11 @@
 #include "modules/device_orientation/DeviceOrientationAbsoluteController.h"
 #include "modules/device_orientation/DeviceOrientationController.h"
 #include "modules/encryptedmedia/HTMLMediaElementEncryptedMedia.h"
-#include "modules/gamepad/NavigatorGamepad.h"
 #include "modules/mediasession/HTMLMediaElementMediaSession.h"
 #include "modules/mediasession/MediaSession.h"
 #include "modules/serviceworkers/NavigatorServiceWorker.h"
 #include "modules/serviceworkers/ServiceWorkerLinkResource.h"
 #include "modules/storage/DOMWindowStorageController.h"
-#include "modules/vr/NavigatorVR.h"
 #include "platform/Histogram.h"
 #include "platform/MIMETypeRegistry.h"
 #include "platform/RuntimeEnabledFeatures.h"
@@ -77,7 +75,6 @@
 #include "public/platform/WebApplicationCacheHost.h"
 #include "public/platform/WebMediaPlayerSource.h"
 #include "public/platform/WebMimeRegistry.h"
-#include "public/platform/WebRTCPeerConnectionHandler.h"
 #include "public/platform/WebSecurityOrigin.h"
 #include "public/platform/WebURL.h"
 #include "public/platform/WebURLError.h"
@@ -164,11 +161,8 @@ void FrameLoaderClientImpl::dispatchDidClearWindowObjectInMainWorld()
             DeviceOrientationAbsoluteController::from(*document);
             if (RuntimeEnabledFeatures::deviceLightEnabled())
                 DeviceLightController::from(*document);
-            NavigatorGamepad::from(*document);
             NavigatorServiceWorker::from(*document);
             DOMWindowStorageController::from(*document);
-            if (RuntimeEnabledFeatures::webVREnabled())
-                NavigatorVR::from(*document);
         }
     }
     // FIXME: when extensions go out of process, this whole concept stops working.
diff --git a/third_party/WebKit/Source/web/WebLocalFrameImpl.cpp b/third_party/WebKit/Source/web/WebLocalFrameImpl.cpp
index 9a9e07e67bd1..e926a5b1b8f4 100644
--- a/third_party/WebKit/Source/web/WebLocalFrameImpl.cpp
+++ b/third_party/WebKit/Source/web/WebLocalFrameImpl.cpp
@@ -154,14 +154,12 @@
 #include "core/timing/Performance.h"
 #include "modules/app_banner/AppBannerController.h"
 #include "modules/audio_output_devices/AudioOutputDeviceClient.h"
-#include "modules/bluetooth/BluetoothSupplement.h"
 #include "modules/installedapp/InstalledAppController.h"
 #include "modules/notifications/NotificationPermissionClient.h"
 #include "modules/permissions/PermissionController.h"
 #include "modules/presentation/PresentationController.h"
 #include "modules/push_messaging/PushController.h"
 #include "modules/screen_orientation/ScreenOrientationController.h"
-#include "modules/vr/VRController.h"
 #include "modules/wake_lock/ScreenWakeLock.h"
 #include "platform/ScriptForbiddenScope.h"
 #include "platform/TraceEvent.h"
@@ -1473,21 +1471,10 @@ void WebLocalFrameImpl::setCoreFrame(LocalFrame* frame)
     provideLocalFileSystemTo(*m_frame, LocalFileSystemClient::create());
     provideNavigatorContentUtilsTo(*m_frame, NavigatorContentUtilsClientImpl::create(this));
 
-    bool enableWebBluetooth = RuntimeEnabledFeatures::webBluetoothEnabled();
-#if OS(CHROMEOS) || OS(ANDROID) || OS(MACOSX)
-    enableWebBluetooth = true;
-#endif
-    if (enableWebBluetooth)
-        BluetoothSupplement::provideTo(*m_frame, m_client ? m_client->bluetooth() : nullptr);
-
     if (RuntimeEnabledFeatures::screenOrientationEnabled())
         ScreenOrientationController::provideTo(*m_frame, m_client ? m_client->webScreenOrientationClient() : nullptr);
-    if (RuntimeEnabledFeatures::presentationEnabled())
-        PresentationController::provideTo(*m_frame, m_client ? m_client->presentationClient() : nullptr);
     if (RuntimeEnabledFeatures::permissionsEnabled())
         PermissionController::provideTo(*m_frame, m_client ? m_client->permissionClient() : nullptr);
-    if (RuntimeEnabledFeatures::webVREnabled())
-        VRController::provideTo(*m_frame, m_client ? m_client->serviceRegistry() : nullptr);
     if (RuntimeEnabledFeatures::wakeLockEnabled())
         ScreenWakeLock::provideTo(*m_frame, m_client ? m_client->serviceRegistry(): nullptr);
     if (RuntimeEnabledFeatures::audioOutputDevicesEnabled())
diff --git a/third_party/WebKit/public/BUILD.gn b/third_party/WebKit/public/BUILD.gn
index 4f3c64734685..fcf00105ef1f 100644
--- a/third_party/WebKit/public/BUILD.gn
+++ b/third_party/WebKit/public/BUILD.gn
@@ -160,7 +160,7 @@ mojom("mojo_bindings") {
   sources = [
     "platform/mime_registry.mojom",
     "platform/modules/background_sync/background_sync.mojom",
-    "platform/modules/bluetooth/web_bluetooth.mojom",
+    #"platform/modules/bluetooth/web_bluetooth.mojom",
     "platform/modules/geolocation/geolocation.mojom",
     "platform/modules/notifications/notification.mojom",
     "platform/modules/notifications/notification_service.mojom",
@@ -174,7 +174,7 @@ mojom("mojo_bindings") {
   public_deps = [
     ":android_mojo_bindings",
     "//cc/ipc:interfaces_surfaceid_only",
-    "//device/bluetooth/public/interfaces:bluetooth_mojom_bluetooth_uuid",
+    #"//device/bluetooth/public/interfaces:bluetooth_mojom_bluetooth_uuid",
   ]
 }
 
